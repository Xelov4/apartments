# Conteneur Next.js - Application avec Shadcn et Tailwind

## Vue d'ensemble

Le conteneur Next.js représente le cœur de l'application Video-IA, gérant à la fois l'interface utilisateur et les fonctionnalités backend. Il utilise Next.js 14, React 18, Tailwind CSS pour le styling et Shadcn UI comme bibliothèque de composants. L'application est construite avec l'architecture App Router et utilise Prisma comme ORM pour interagir avec la base de données MariaDB.

## Configuration du Dockerfile

```dockerfile
FROM node:20-alpine AS base

# Métadonnées
LABEL maintainer="team@video-ia.com"
LABEL version="1.0"
LABEL description="Next.js application for Video-IA"

# Environnement de développement
FROM base AS deps
WORKDIR /app

# Installation des dépendances de compilation native si nécessaires
RUN apk add --no-cache libc6-compat python3 make g++

# Copie des fichiers de dépendances
COPY package.json package-lock.json* ./

# Installation des dépendances avec mise en cache optimisée
RUN npm ci

# Environnement de build
FROM base AS builder
WORKDIR /app
COPY --from=deps /app/node_modules ./node_modules
COPY . .

# Variables d'environnement pour la compilation
ARG DATABASE_URL
ENV DATABASE_URL=${DATABASE_URL}
ARG NEXT_PUBLIC_API_URL
ENV NEXT_PUBLIC_API_URL=${NEXT_PUBLIC_API_URL}
ARG NEXTAUTH_URL
ENV NEXTAUTH_URL=${NEXTAUTH_URL}
ARG NEXTAUTH_SECRET
ENV NEXTAUTH_SECRET=${NEXTAUTH_SECRET}

# Génération du client Prisma
RUN npx prisma generate

# Construction de l'application
RUN npm run build

# Environnement de production
FROM base AS runner
WORKDIR /app

# Variables d'environnement pour l'exécution
ENV NODE_ENV=production
ENV NEXT_TELEMETRY_DISABLED=1

# Installation des dépendances nécessaires
RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nextjs

# Copie des fichiers nécessaires pour l'exécution
COPY --from=builder /app/public ./public
COPY --from=builder /app/prisma ./prisma
COPY --from=builder /app/next.config.js ./

# Configuration des autorisations appropriées
RUN mkdir -p /app/.next/cache/images && \
    chown -R nextjs:nodejs /app/.next/cache/images

# Copie du build optimisé pour production
COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./
COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static

# Répertoire pour les uploads
RUN mkdir -p /app/public/uploads && \
    chown -R nextjs:nodejs /app/public/uploads

# Utilisateur sans privilège pour l'exécution
USER nextjs

# Exposition du port
EXPOSE 3000

# Script de démarrage avec migrations automatiques
CMD ["sh", "-c", "npx prisma migrate deploy && node server.js"]
```

## Structure de l'application Next.js

```
nextjs/
├── app/                    # Dossier principal de l'App Router
│   ├── layout.js           # Layout principal
│   ├── page.js             # Page d'accueil
│   ├── providers.js        # Providers globaux (contexts)
│   ├── global.css          # Styles globaux
│   ├── categories/         # Pages des catégories
│   │   ├── page.js         # Liste des catégories
│   │   └── [slug]/         # Page de catégorie spécifique
│   │       └── page.js
│   ├── tools/              # Pages des outils
│   │   └── [slug]/         # Page détaillée d'un outil
│   │       └── page.js
│   ├── search/             # Page de recherche
│   │   └── page.js
│   ├── submit/             # Page de soumission d'outil
│   │   └── page.js
│   ├── contact/            # Page de contact
│   │   └── page.js
│   ├── admin/              # Section admin
│   │   ├── layout.js       # Layout admin avec auth
│   │   ├── page.js         # Dashboard
│   │   ├── tools/          # Gestion des outils
│   │   ├── categories/     # Gestion des catégories
│   │   ├── reviews/        # Gestion des avis
│   │   └── users/          # Gestion des utilisateurs
│   └── api/                # Routes API (Server Actions)
│       ├── auth/           # Authentification
│       ├── tools/          # API outils
│       ├── categories/     # API catégories
│       ├── reviews/        # API avis
│       └── upload/         # API upload
├── components/             # Composants React
│   ├── layout/             # Composants de structure
│   │   ├── Header.jsx
│   │   ├── Footer.jsx
│   │   ├── Navigation.jsx
│   │   └── Sidebar.jsx
│   ├── ui/                 # Composants UI (Shadcn)
│   │   ├── button.jsx
│   │   ├── card.jsx
│   │   ├── input.jsx
│   │   ├── dropdown.jsx
│   │   ├── badge.jsx
│   │   ├── avatar.jsx
│   │   ├── dialog.jsx
│   │   ├── tooltip.jsx
│   │   └── toast.jsx
│   └── modules/            # Composants métier
│       ├── ToolCard.jsx
│       ├── SearchBar.jsx
│       ├── FilterPanel.jsx
│       ├── ReviewForm.jsx
│       ├── CategoryList.jsx
│       └── RatingStars.jsx
├── lib/                    # Librairies et utilitaires
│   ├── prisma/             # Configuration ORM
│   │   ├── schema.prisma
│   │   └── index.js        # Client Prisma singleton
│   ├── utils/              # Fonctions utilitaires
│   │   ├── formatting.js
│   │   ├── validation.js
│   │   ├── helpers.js
│   │   └── seo.js
│   ├── actions/            # Server Actions
│   │   ├── tools.js
│   │   ├── categories.js
│   │   └── reviews.js
│   ├── hooks/              # Custom hooks React
│   │   ├── useSearch.js
│   │   ├── useFilter.js
│   │   ├── usePagination.js
│   │   └── useSortable.js
│   └── context/            # Contexts React
│       ├── AuthContext.js
│       ├── ThemeContext.js
│       └── SearchContext.js
├── public/                 # Fichiers statiques
│   ├── images/             # Images
│   ├── icons/              # Icônes
│   ├── uploads/            # Uploads utilisateurs
│   ├── favicon.ico
│   └── robots.txt
├── config/                 # Configuration
│   ├── site.js             # Configuration du site
│   ├── dashboard.js        # Configuration admin
│   └── navigation.js       # Configuration navigation
├── prisma/                 # Migrations Prisma
│   ├── schema.prisma       # Schéma de base de données
│   └── migrations/         # Fichiers de migration
├── scripts/                # Scripts utilitaires
│   ├── seed.js             # Seeding de données
│   └── generate-sitemap.js # Génération sitemap
├── .env.local              # Variables d'environnement
├── next.config.js          # Configuration Next.js
├── postcss.config.js       # Configuration PostCSS
├── tailwind.config.js      # Configuration Tailwind CSS
├── package.json            # Dépendances npm
└── tsconfig.json           # Configuration TypeScript
```

## Configuration des dépendances (package.json)

```json
{
  "name": "video-ia",
  "version": "1.0.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "prisma:generate": "prisma generate",
    "prisma:migrate": "prisma migrate deploy",
    "prisma:studio": "prisma studio",
    "seed": "node scripts/seed.js"
  },
  "dependencies": {
    "@hookform/resolvers": "^3.3.2",
    "@prisma/client": "^5.5.2",
    "@radix-ui/react-accordion": "^1.1.2",
    "@radix-ui/react-alert-dialog": "^1.0.5",
    "@radix-ui/react-avatar": "^1.0.4",
    "@radix-ui/react-checkbox": "^1.0.4",
    "@radix-ui/react-dialog": "^1.0.5",
    "@radix-ui/react-dropdown-menu": "^2.0.6",
    "@radix-ui/react-label": "^2.0.2",
    "@radix-ui/react-popover": "^1.0.7",
    "@radix-ui/react-select": "^1.2.2",
    "@radix-ui/react-separator": "^1.0.3",
    "@radix-ui/react-slider": "^1.1.2",
    "@radix-ui/react-slot": "^1.0.2",
    "@radix-ui/react-tabs": "^1.0.4",
    "@radix-ui/react-toast": "^1.1.5",
    "@radix-ui/react-tooltip": "^1.0.7",
    "@tanstack/react-table": "^8.10.7",
    "axios": "^1.6.0",
    "bcrypt": "^5.1.1",
    "class-variance-authority": "^0.7.0",
    "clsx": "^2.0.0",
    "cmdk": "^0.2.0",
    "date-fns": "^2.30.0",
    "framer-motion": "^10.16.4",
    "jsonwebtoken": "^9.0.2",
    "lucide-react": "^0.290.0",
    "next": "^14.0.0",
    "next-auth": "^4.24.4",
    "next-themes": "^0.2.1",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-dropzone": "^14.2.3",
    "react-hook-form": "^7.47.0",
    "react-icons": "^4.11.0",
    "sharp": "^0.32.6",
    "sonner": "^1.0.3",
    "tailwind-merge": "^1.14.0",
    "tailwindcss-animate": "^1.0.7",
    "zod": "^3.22.4",
    "zustand": "^4.4.3"
  },
  "devDependencies": {
    "@tailwindcss/forms": "^0.5.6",
    "@types/node": "^20.8.10",
    "@types/react": "^18.2.33",
    "@types/react-dom": "^18.2.14",
    "autoprefixer": "^10.4.16",
    "eslint": "^8.52.0",
    "eslint-config-next": "^14.0.0",
    "postcss": "^8.4.31",
    "prisma": "^5.5.2",
    "tailwindcss": "^3.3.5",
    "typescript": "^5.2.2"
  }
}
```

## Configuration Tailwind CSS (tailwind.config.js)

```javascript
const { fontFamily } = require("tailwindcss/defaultTheme");

/** @type {import('tailwindcss').Config} */
module.exports = {
  darkMode: ["class"],
  content: [
    "./app/**/*.{js,ts,jsx,tsx}",
    "./components/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    container: {
      center: true,
      padding: "2rem",
      screens: {
        "2xl": "1400px",
      },
    },
    extend: {
      colors: {
        border: "hsl(var(--border))",
        input: "hsl(var(--input))",
        ring: "hsl(var(--ring))",
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))",
        },
        secondary: {
          DEFAULT: "hsl(var(--secondary))",
          foreground: "hsl(var(--secondary-foreground))",
        },
        destructive: {
          DEFAULT: "hsl(var(--destructive))",
          foreground: "hsl(var(--destructive-foreground))",
        },
        muted: {
          DEFAULT: "hsl(var(--muted))",
          foreground: "hsl(var(--muted-foreground))",
        },
        accent: {
          DEFAULT: "hsl(var(--accent))",
          foreground: "hsl(var(--accent-foreground))",
        },
        popover: {
          DEFAULT: "hsl(var(--popover))",
          foreground: "hsl(var(--popover-foreground))",
        },
        card: {
          DEFAULT: "hsl(var(--card))",
          foreground: "hsl(var(--card-foreground))",
        },
        // Couleurs spécifiques à l'application
        brand: {
          primary: "#4361ee",
          secondary: "#3a0ca3",
          accent: "#4cc9f0",
          light: "#f8f9fa",
          dark: "#212529",
        },
      },
      borderRadius: {
        lg: "var(--radius)",
        md: "calc(var(--radius) - 2px)",
        sm: "calc(var(--radius) - 4px)",
      },
      fontFamily: {
        sans: ["var(--font-sans)", ...fontFamily.sans],
      },
      keyframes: {
        "accordion-down": {
          from: { height: 0 },
          to: { height: "var(--radix-accordion-content-height)" },
        },
        "accordion-up": {
          from: { height: "var(--radix-accordion-content-height)" },
          to: { height: 0 },
        },
      },
      animation: {
        "accordion-down": "accordion-down 0.2s ease-out",
        "accordion-up": "accordion-up 0.2s ease-out",
      },
      typography: {
        DEFAULT: {
          css: {
            maxWidth: '65ch',
            color: 'var(--tw-prose-body)',
            a: {
              color: 'var(--tw-prose-links)',
              '&:hover': {
                color: 'var(--tw-prose-links-hover)',
              },
            },
          },
        },
      },
    },
  },
  plugins: [
    require("tailwindcss-animate"),
    require("@tailwindcss/forms"),
  ],
};
```

## Configuration Next.js (next.config.js)

```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
  swcMinify: true,
  output: 'standalone',
  images: {
    domains: ['localhost', 'video-ia.com'],
    formats: ['image/avif', 'image/webp'],
    remotePatterns: [
      {
        protocol: 'https',
        hostname: 'video-ia.com',
        port: '',
        pathname: '/uploads/**',
      },
    ],
  },
  async redirects() {
    return [
      {
        source: '/admin',
        destination: '/admin/dashboard',
        permanent: true,
      },
    ];
  },
  experimental: {
    serverActions: true,
    serverComponentsExternalPackages: ["@prisma/client"],
  },
  headers: async () => {
    return [
      {
        source: '/(.*)',
        headers: [
          {
            key: 'X-Content-Type-Options',
            value: 'nosniff',
          },
          {
            key: 'X-Frame-Options',
            value: 'DENY',
          },
          {
            key: 'X-XSS-Protection',
            value: '1; mode=block',
          },
        ],
      },
    ];
  },
};

module.exports = nextConfig;
```

## Configuration de Shadcn UI

Shadcn UI n'est pas une bibliothèque classique à installer via npm, mais plutôt un ensemble de composants à intégrer directement dans votre projet. Voici comment l'installer et le configurer:

### 1. Installation initiale

```bash
# Installation des dépendances de base
npx shadcn-ui@latest init
```

### 2. Configuration des composants (shadcn.config.ts)

```typescript
import { Config } from "@/types/shadcn";

export const shadcnConfig: Config = {
  style: "default", // default | new-york
  rsc: true, // true | false
  tailwind: {
    config: "tailwind.config.js",
    css: "app/globals.css",
    baseColor: "slate", // slate | gray | zinc | neutral | stone
    cssVariables: true, // true | false
    prefix: "", // "" | "tw-"
  },
  aliases: {
    components: "@/components",
    utils: "@/lib/utils",
  },
};
```

### 3. Installation des composants individuels

```bash
# Installation des composants de base
npx shadcn-ui@latest add button card input form checkbox select toast dialog

# Plus de composants pour des fonctionnalités spécifiques
npx shadcn-ui@latest add avatar badge dropdown-menu popover tabs accordion tooltip slider separator
```

## Configuration des variables d'environnement (.env.local)

```
# Base de données
DATABASE_URL="mysql://video_ia_user:password@mariadb:3306/video_ia_db"

# Authentification
NEXTAUTH_URL="https://video-ia.com"
NEXTAUTH_SECRET="your_next_auth_secret_key_here"
JWT_SECRET="your_jwt_secret_key_here"

# API publique
NEXT_PUBLIC_API_URL="https://video-ia.com/api"

# Upload
NEXT_PUBLIC_UPLOAD_MAX_SIZE=5242880 # 5MB
UPLOAD_DIR="./public/uploads"

# SEO
NEXT_PUBLIC_SITE_NAME="Video-IA"
NEXT_PUBLIC_SITE_DESCRIPTION="Annuaire des outils d'intelligence artificielle pour la vidéo"
NEXT_PUBLIC_SITE_URL="https://video-ia.com"

# Analytics
NEXT_PUBLIC_GA_MEASUREMENT_ID="G-XXXXXXXXXX"
```

## Configuration Prisma (schema.prisma)

```prisma
generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["fullTextSearch", "fullTextIndex"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// Modèle pour les catégories
model Category {
  id            Int       @id @default(autoincrement())
  name          String
  slug          String    @unique
  description   String?   @db.Text
  parent_id     Int?
  parent        Category? @relation("CategoryToSubcategory", fields: [parent_id], references: [id], onDelete: SetNull)
  subcategories Category[] @relation("CategoryToSubcategory")
  tools         Tool[]
  created_at    DateTime  @default(now())
  updated_at    DateTime  @updatedAt

  @@index([parent_id])
  @@index([slug])
  @@map("categories")
}

// Modèle pour les outils
model Tool {
  id               Int       @id @default(autoincrement())
  name             String
  slug             String    @unique
  website          String
  description      String    @db.Text
  short_desc       String
  logo_url         String?
  category_id      Int
  category         Category  @relation(fields: [category_id], references: [id])
  pricing_type     String    // Enum: 'free', 'freemium', 'paid', 'trial'
  pricing_details  String?   @db.Text
  features         Json?
  is_featured      Boolean   @default(false)
  view_count       Int       @default(0)
  reviews          Review[]
  tags             Tag[]     @relation("ToolToTag")
  created_at       DateTime  @default(now())
  updated_at       DateTime  @updatedAt

  @@index([category_id])
  @@index([slug])
  @@index([is_featured])
  @@fulltext([name, short_desc, description])
  @@map("tools")
}

// Modèle pour les tags
model Tag {
  id    Int    @id @default(autoincrement())
  name  String @unique
  slug  String @unique
  tools Tool[] @relation("ToolToTag")

  @@index([slug])
  @@map("tags")
}

// Modèle pour les avis
model Review {
  id          Int      @id @default(autoincrement())
  tool_id     Int
  tool        Tool     @relation(fields: [tool_id], references: [id], onDelete: Cascade)
  user_name   String
  rating      Int
  comment     String   @db.Text
  is_approved Boolean  @default(false)
  created_at  DateTime @default(now())

  @@index([tool_id])
  @@index([is_approved])
  @@map("reviews")
}

// Modèle pour les soumissions d'outils
model Submission {
  id               Int      @id @default(autoincrement())
  name             String
  website          String
  description      String   @db.Text
  short_desc       String
  category_id      Int
  pricing_type     String
  pricing_details  String?  @db.Text
  features         Json?
  submitter_name   String
  submitter_email  String
  status           String   @default("pending") // 'pending', 'approved', 'rejected'
  created_at       DateTime @default(now())

  @@index([status])
  @@map("submissions")
}

// Modèle pour les utilisateurs (Admin)
model User {
  id         Int      @id @default(autoincrement())
  email      String   @unique
  password   String
  name       String
  role       String   @default("admin")
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@index([email])
  @@map("users")
}

// Modèle pour les messages de contact
model Contact {
  id         Int      @id @default(autoincrement())
  name       String
  email      String
  subject    String
  message    String   @db.Text
  is_read    Boolean  @default(false)
  created_at DateTime @default(now())

  @@index([is_read])
  @@map("contacts")
}
```

## Mise en place de Shadcn UI

### 1. Création des composants de base (ui/button.jsx)

```jsx
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva } from "class-variance-authority"

import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        destructive: "bg-destructive text-destructive-foreground hover:bg-destructive/90",
        outline: "border border-input bg-background hover:bg-accent hover:text-accent-foreground",
        secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline",
        brand: "bg-brand-primary text-white hover:bg-brand-primary/90",
      },
      size: {
        default: "h-10 px-4 py-2",
        sm: "h-9 rounded-md px-3",
        lg: "h-11 rounded-md px-8",
        icon: "h-10 w-10",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

const Button = React.forwardRef(({ className, variant, size, asChild = false, ...props }, ref) => {
  const Comp = asChild ? Slot : "button"
  return (
    <Comp
      className={cn(buttonVariants({ variant, size, className }))}
      ref={ref}
      {...props}
    />
  )
})
Button.displayName = "Button"

export { Button, buttonVariants }
```

### 2. Mise en place du thème (app/globals.css)

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;

    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;

    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;

    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;

    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;

    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;

    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;

    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;

    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;

    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

@layer components {
  .container-custom {
    @apply w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }
  
  .shadow-card {
    @apply shadow-md hover:shadow-lg transition-shadow duration-300;
  }
  
  .btn-primary {
    @apply bg-brand-primary text-white hover:bg-brand-primary/90 transition-colors;
  }
  
  .tag-badge {
    @apply inline-flex items-center rounded-full bg-blue-100 px-2.5 py-0.5 text-xs font-medium text-blue-800;
  }
}
```

## Composants principaux

### 1. Layout principal (app/layout.js)

```jsx
import { Inter } from 'next/font/google'
import { Providers } from './providers'
import './globals.css'

import Header from '@/components/layout/Header'
import Footer from '@/components/layout/Footer'
import { Toaster } from '@/components/ui/toaster'

const inter = Inter({ 
  subsets: ['latin'],
  display: 'swap',
  variable: '--font-sans',
})

export const metadata = {
  title: {
    default: 'Video-IA | Annuaire des outils IA pour la vidéo',
    template: '%s | Video-IA'
  },
  description: 'Découvrez les meilleurs outils d\'intelligence artificielle dédiés à la vidéo. Comparez, évaluez et trouvez l\'outil parfait pour vos besoins.',
  keywords: ['IA', 'vidéo', 'intelligence artificielle', 'outils vidéo', 'montage vidéo'],
  authors: [{ name: 'Équipe Video-IA' }],
  creator: 'Video-IA',
  openGraph: {
    type: 'website',
    locale: 'fr_FR',
    url: 'https://video-ia.com',
    title: 'Video-IA | Annuaire des outils IA pour la vidéo',
    description: 'Découvrez les meilleurs outils d\'intelligence artificielle dédiés à la vidéo.',
    siteName: 'Video-IA',
    images: [{
      url: 'https://video-ia.com/images/og-image.jpg',
    }],
  },
  twitter: {
    card: 'summary_large_image',
    title: 'Video-IA | Annuaire des outils IA pour la vidéo',
    description: 'Découvrez les meilleurs outils d\'intelligence artificielle dédiés à la vidéo.',
    images: ['https://video-ia.com/images/twitter-image.jpg'],
  },
  icons: {
    icon: '/favicon.ico',
    shortcut: '/favicon-16x16.png',
    apple: '/apple-touch-icon.png',
  },
  manifest: 'https://video-ia.com/site.webmanifest',
}

export default function RootLayout({ children }) {
  return (
    <html lang="fr" suppressHydrationWarning>
      <body className={`${inter.variable} font-sans min-h-screen flex flex-col`}>
        <Providers>
          <Header />
          <main className="flex-grow">
            {children}
          </main>
          <Footer />
          <Toaster />
        </Providers>
      </body>
    </html>
  )
}
```

### 2. Providers React (app/providers.js)

```jsx
'use client'

import { ThemeProvider } from 'next/themes'
import { SessionProvider } from 'next-auth/react'
import { QueryClientProvider, QueryClient } from '@tanstack/react-query'
import { SearchProvider } from '@/lib/context/SearchContext'

// Client for React Query
const queryClient = new QueryClient()

export function Providers({ children }) {
  return (
    <QueryClientProvider client={queryClient}>
      <SessionProvider>
        <ThemeProvider attribute="class" defaultTheme="light" enableSystem>
          <SearchProvider>
            {children}
          </SearchProvider>
        </ThemeProvider>
      </SessionProvider>
    </QueryClientProvider>
  )
}
```

### 3. Composant de carte d'outil (components/modules/ToolCard.jsx)

```jsx
import { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from "@/components/ui/card"
import { Badge } from "@/components/ui/badge"
import { Button } from "@/components/ui/button"
import Link from "next/link"
import Image from "next/image"
import { StarIcon } from "lucide-react"

export default function ToolCard({ tool }) {
  const { name, slug, short_desc, logo_url, pricing_type, category, rating } = tool
  
  return (
    <Card className="shadow-card h-full flex flex-col transition-all duration-300 hover:-translate-y-1">
      <CardHeader className="pb-2">
        <div className="flex justify-between items-start">
          <div className="flex items-center space-x-4">
            <div className="relative w-12 h-12 overflow-hidden rounded-md">
              {logo_url ? (
                <Image 
                  src={logo_url} 
                  alt={name} 
                  fill 
                  className="object-cover" 
                  sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
                />
              ) : (
                <div className="w-full h-full bg-muted flex items-center justify-center">
                  <span className="text-lg font-bold text-muted-foreground">
                    {name.charAt(0)}
                  </span>
                </div>
              )}
            </div>
            <div>
              <CardTitle className="text-xl">{name}</CardTitle>
              <CardDescription className="text-xs">
                <Link href={`/categories/${category.slug}`} className="hover:underline">
                  {category.name}
                </Link>
              </CardDescription>
            </div>
          </div>
          <Badge variant={
            pricing_type === 'free' ? 'success' : 
            pricing_type === 'freemium' ? 'warning' : 
            'default'
          }>
            {pricing_type === 'free' ? 'Gratuit' : 
             pricing_type === 'freemium' ? 'Freemium' : 
             pricing_type === 'trial' ? 'Essai gratuit' : 'Payant'}
          </Badge>
        </div>
      </CardHeader>
      
      <CardContent className="flex-grow">
        <p className="text-sm text-muted-foreground line-clamp-3">{short_desc}</p>
        
        <div className="flex items-center mt-4">
          <div className="flex text-yellow-400">
            {[...Array(5)].map((_, i) => (
              <StarIcon 
                key={i}
                className={`w-4 h-4 ${i < Math.round(rating) ? 'fill-current' : 'stroke-current fill-transparent'}`} 
              />
            ))}
          </div>
          <span className="text-xs text-muted-foreground ml-2">
            {rating} ({tool.reviews.length} avis)
          </span>
        </div>
      </CardContent>
      
      <CardFooter className="pt-2">
        <div className="w-full flex justify-between items-center">
          <div className="flex flex-wrap gap-1">
            {tool.tags.slice(0, 2).map(tag => (
              <Badge key={tag.id} variant="outline" className="text-xs">
                {tag.name}
              </Badge>
            ))}
            {tool.tags.length > 2 && (
              <Badge variant="outline" className="text-xs">
                +{tool.tags.length - 2}
              </Badge>
            )}
          </div>
          <Button asChild size="sm" className="ml-auto">
            <Link href={`/tools/${slug}`}>
              Voir détails
            </Link>
          </Button>
        </div>
      </CardFooter>
    </Card>
  )
}
```

### 4. Barre de recherche (components/modules/SearchBar.jsx)

```jsx
'use client'

import { useState, useEffect, useRef } from 'react'
import { useRouter } from 'next/navigation'
import { Search, X } from 'lucide-react'
import { Input } from '@/components/ui/input'
import { Button } from '@/components/ui/button'
import { 
  CommandDialog,
  CommandInput,
  CommandList,
  CommandEmpty,
  CommandGroup,
  CommandItem,
} from '@/components/ui/command'
import { useSearch } from '@/lib/hooks/useSearch'

export default function SearchBar({ placeholder = 'Rechercher un outil...', variant = 'default' }) {
  const [open, setOpen] = useState(false)
  const [query, setQuery] = useState('')
  const inputRef = useRef(null)
  const router = useRouter()
  const { results, isLoading, error } = useSearch(query)
  
  // Open command dialog with keyboard shortcut
  useEffect(() => {
    const down = (e) => {
      if (e.key === 'k' && (e.metaKey || e.ctrlKey)) {
        e.preventDefault()
        setOpen((open) => !open)
      }
    }
    
    document.addEventListener('keydown', down)
    return () => document.removeEventListener('keydown', down)
  }, [])
  
  const handleSearch = () => {
    if (query.trim()) {
      router.push(`/search?q=${encodeURIComponent(query.trim())}`)
      setOpen(false)
    }
  }
  
  const handleKeyDown = (e) => {
    if (e.key === 'Enter') {
      handleSearch()
    }
  }
  
  return (
    <>
      {variant === 'default' ? (
        <div className="relative max-w-md w-full mx-auto">
          <div className="relative flex items-center">
            <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground h-4 w-4" />
            <Input
              ref={inputRef}
              value={query}
              onChange={(e) => setQuery(e.target.value)}
              onKeyDown={handleKeyDown}
              placeholder={placeholder}
              className="pl-10 pr-10 w-full bg-background"
              onClick={() => setOpen(true)}
            />
            {query && (
              <X 
                className="absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground h-4 w-4 cursor-pointer" 
                onClick={() => setQuery('')}
              />
            )}
          </div>
        </div>
      ) : (
        <div className="flex items-center w-full max-w-md mx-auto">
          <div className="relative flex-grow">
            <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-white/70 h-4 w-4" />
            <Input
              ref={inputRef}
              value={query}
              onChange={(e) => setQuery(e.target.value)}
              placeholder={placeholder}
              className="pl-10 w-full bg-white/10 text-white border-white/20 placeholder:text-white/70 focus:bg-white/20"
              onClick={() => setOpen(true)}
            />
          </div>
          <Button 
            onClick={handleSearch} 
            className="ml-2"
          >
            Rechercher
          </Button>
        </div>
      )}
      
      <CommandDialog open={open} onOpenChange={setOpen}>
        <CommandInput 
          placeholder={placeholder} 
          value={query}
          onValueChange={setQuery}
        />
        <CommandList>
          {isLoading ? (
            <div className="py-6 text-center text-sm">Chargement des résultats...</div>
          ) : error ? (
            <div className="py-6 text-center text-sm text-destructive">Une erreur est survenue</div>
          ) : (
            <>
              <CommandEmpty>Aucun résultat trouvé</CommandEmpty>
              {results.tools?.length > 0 && (
                <CommandGroup heading="Outils">
                  {results.tools.map((tool) => (
                    <CommandItem
                      key={tool.id}
                      onSelect={() => {
                        router.push(`/tools/${tool.slug}`)
                        setOpen(false)
                      }}
                    >
                      <div className="flex items-center">
                        {tool.logo_url && (
                          <div className="w-6 h-6 mr-2 overflow-hidden rounded">
                            <img 
                              src={tool.logo_url} 
                              alt={tool.name} 
                              className="w-full h-full object-cover"
                            />
                          </div>
                        )}
                        <span>{tool.name}</span>
                      </div>
                    </CommandItem>
                  ))}
                </CommandGroup>
              )}
              {results.categories?.length > 0 && (
                <CommandGroup heading="Catégories">
                  {results.categories.map((category) => (
                    <CommandItem
                      key={category.id}
                      onSelect={() => {
                        router.push(`/categories/${category.slug}`)
                        setOpen(false)
                      }}
                    >
                      {category.name}
                    </CommandItem>
                  ))}
                </CommandGroup>
              )}
              {results.tags?.length > 0 && (
                <CommandGroup heading="Tags">
                  {results.tags.map((tag) => (
                    <CommandItem
                      key={tag.id}
                      onSelect={() => {
                        router.push(`/search?tag=${tag.slug}`)
                        setOpen(false)
                      }}
                    >
                      #{tag.name}
                    </CommandItem>
                  ))}
                </CommandGroup>
              )}
              <CommandItem
                onSelect={() => {
                  router.push(`/search?q=${encodeURIComponent(query)}`)
                  setOpen(false)
                }}
              >
                <Search className="mr-2 h-4 w-4" />
                <span>Rechercher "{query}"</span>
              </CommandItem>
            </>
          )}
        </CommandList>
      </CommandDialog>
    </>
  )
}
```

## Server Actions (lib/actions/tools.js)

```javascript
'use server'

import { revalidatePath } from 'next/cache'
import { redirect } from 'next/navigation'
import { z } from 'zod'
import { prisma } from '@/lib/prisma'

// Schéma de validation pour la création/mise à jour d'un outil
const toolSchema = z.object({
  name: z.string().min(3, { message: "Le nom doit contenir au moins 3 caractères" }).max(100),
  slug: z.string().regex(/^[a-z0-9-]+$/, { 
    message: "Le slug ne doit contenir que des lettres minuscules, chiffres et tirets" 
  }),
  website: z.string().url({ message: "L'URL du site web n'est pas valide" }),
  description: z.string().min(100, { message: "La description doit contenir au moins 100 caractères" }),
  short_desc: z.string().min(10, { message: "La description courte doit contenir au moins 10 caractères" }).max(255),
  category_id: z.number().positive(),
  pricing_type: z.enum(['free', 'freemium', 'paid', 'trial']),
  pricing_details: z.string().optional().nullable(),
  features: z.array(z.object({
    title: z.string(),
    description: z.string()
  })).optional().nullable(),
  is_featured: z.boolean().default(false),
  tags: z.array(z.number()).default([])
})

// Récupération de tous les outils
export async function getTools({ 
  categoryId = null, 
  tags = [], 
  pricingType = null, 
  featured = null,
  sort = 'createdAt', 
  order = 'desc',
  page = 1,
  limit = 12
}) {
  const skip = (page - 1) * limit
  
  // Construction des filtres
  const where = {}
  
  if (categoryId) {
    where.category_id = Number(categoryId)
  }
  
  if (tags.length > 0) {
    where.tags = {
      some: {
        id: {
          in: tags.map(tag => Number(tag))
        }
      }
    }
  }
  
  if (pricingType) {
    where.pricing_type = pricingType
  }
  
  if (featured !== null) {
    where.is_featured = featured
  }
  
  // Détermination du tri
  const orderBy = {}
  
  switch (sort) {
    case 'name':
      orderBy.name = order
      break
    case 'rating':
      orderBy.reviews = {
        _avg: {
          rating: order
        }
      }
      break
    case 'createdAt':
    default:
      orderBy.created_at = order
  }
  
  // Récupération des outils
  const [tools, totalCount] = await Promise.all([
    prisma.tool.findMany({
      where,
      include: {
        category: true,
        tags: true,
        reviews: {
          where: {
            is_approved: true
          }
        }
      },
      orderBy,
      skip,
      take: limit
    }),
    prisma.tool.count({ where })
  ])
  
  // Calcul des métadonnées de pagination
  const totalPages = Math.ceil(totalCount / limit)
  
  return {
    tools,
    pagination: {
      total: totalCount,
      pages: totalPages,
      current: page,
      limit
    }
  }
}

// Récupération d'un outil par son slug
export async function getToolBySlug(slug) {
  const tool = await prisma.tool.findUnique({
    where: { slug },
    include: {
      category: true,
      tags: true,
      reviews: {
        where: {
          is_approved: true
        },
        orderBy: {
          created_at: 'desc'
        }
      }
    }
  })
  
  if (!tool) {
    return null
  }
  
  // Incrémentation du compteur de vues
  await prisma.tool.update({
    where: { id: tool.id },
    data: { view_count: { increment: 1 } }
  })
  
  // Calcul de la note moyenne
  const ratings = tool.reviews.map(review => review.rating)
  const rating = ratings.length > 0 
    ? ratings.reduce((a, b) => a + b, 0) / ratings.length 
    : 0
  
  // Récupération des outils similaires
  const similarTools = await prisma.tool.findMany({
    where: {
      category_id: tool.category_id,
      id: { not: tool.id }
    },
    include: {
      category: true,
      tags: true,
      reviews: {
        where: {
          is_approved: true
        }
      }
    },
    take: 4
  })
  
  return {
    ...tool,
    rating,
    similarTools
  }
}

// Recherche d'outils
export async function searchTools(query, limit = 10) {
  if (!query || query.trim().length < 2) {
    return {
      tools: [],
      categories: [],
      tags: []
    }
  }
  
  const searchTerm = query.trim()
  
  // Recherche dans les outils
  const tools = await prisma.tool.findMany({
    where: {
      OR: [
        { name: { contains: searchTerm } },
        { short_desc: { contains: searchTerm } },
        { description: { contains: searchTerm } }
      ]
    },
    include: {
      category: true,
      tags: true
    },
    take: limit
  })
  
  // Recherche dans les catégories
  const categories = await prisma.category.findMany({
    where: {
      OR: [
        { name: { contains: searchTerm } },
        { description: { contains: searchTerm } }
      ]
    },
    take: limit
  })
  
  // Recherche dans les tags
  const tags = await prisma.tag.findMany({
    where: {
      name: { contains: searchTerm }
    },
    take: limit
  })
  
  return {
    tools,
    categories,
    tags
  }
}

// Création d'un nouvel outil
export async function createTool(formData) {
  const rawData = Object.fromEntries(formData.entries())
  
  // Traitement des données JSON et tableaux
  if (rawData.features) {
    try {
      rawData.features = JSON.parse(rawData.features)
    } catch (e) {
      rawData.features = null
    }
  }
  
  if (rawData.tags) {
    rawData.tags = rawData.tags.split(',').map(id => parseInt(id.trim())).filter(id => !isNaN(id))
  } else {
    rawData.tags = []
  }
  
  // Validation des données
  const validationResult = toolSchema.safeParse(rawData)
  
  if (!validationResult.success) {
    return {
      success: false,
      errors: validationResult.error.flatten().fieldErrors
    }
  }
  
  const { tags, ...toolData } = validationResult.data
  
  // Création de l'outil avec ses relations
  try {
    const tool = await prisma.tool.create({
      data: {
        ...toolData,
        tags: {
          connect: tags.map(id => ({ id }))
        }
      }
    })
    
    revalidatePath('/tools')
    revalidatePath(`/categories/${tool.category_id}`)
    
    return {
      success: true,
      tool
    }
  } catch (error) {
    console.error('Erreur lors de la création de l\'outil:', error)
    
    return {
      success: false,
      errors: {
        _form: 'Une erreur est survenue lors de la création de l\'outil.'
      }
    }
  }
}

// Mise à jour d'un outil
export async function updateTool(id, formData) {
  const toolId = parseInt(id)
  const rawData = Object.fromEntries(formData.entries())
  
  // Traitement des données JSON et tableaux
  if (rawData.features) {
    try {
      rawData.features = JSON.parse(rawData.features)
    } catch (e) {
      rawData.features = null
    }
  }
  
  if (rawData.tags) {
    rawData.tags = rawData.tags.split(',').map(id => parseInt(id.trim())).filter(id => !isNaN(id))
  } else {
    rawData.tags = []
  }
  
  rawData.is_featured = rawData.is_featured === 'true'
  
  // Validation des données
  const validationResult = toolSchema.safeParse(rawData)
  
  if (!validationResult.success) {
    return {
      success: false,
      errors: validationResult.error.flatten().fieldErrors
    }
  }
  
  const { tags, ...toolData } = validationResult.data
  
  // Récupération de l'outil existant
  const existingTool = await prisma.tool.findUnique({
    where: { id: toolId },
    include: { tags: true }
  })
  
  if (!existingTool) {
    return {
      success: false,
      errors: {
        _form: 'Outil introuvable'
      }
    }
  }
  
  // Mise à jour de l'outil avec ses relations
  try {
    const tool = await prisma.tool.update({
      where: { id: toolId },
      data: {
        ...toolData,
        tags: {
          disconnect: existingTool.tags.map(tag => ({ id: tag.id })),
          connect: tags.map(id => ({ id }))
        }
      }
    })
    
    revalidatePath('/tools')
    revalidatePath(`/tools/${tool.slug}`)
    revalidatePath(`/categories/${tool.category_id}`)
    
    return {
      success: true,
      tool
    }
  } catch (error) {
    console.error('Erreur lors de la mise à jour de l\'outil:', error)
    
    return {
      success: false,
      errors: {
        _form: 'Une erreur est survenue lors de la mise à jour de l\'outil.'
      }
    }
  }
}

// Suppression d'un outil
export async function deleteTool(id) {
  const toolId = parseInt(id)
  
  try {
    // Récupération de l'outil pour la revalidation des chemins
    const tool = await prisma.tool.findUnique({
      where: { id: toolId },
      select: { slug: true, category_id: true }
    })
    
    if (!tool) {
      return {
        success: false,
        error: 'Outil introuvable'
      }
    }
    
    // Suppression de l'outil
    await prisma.tool.delete({
      where: { id: toolId }
    })
    
    revalidatePath('/tools')
    revalidatePath(`/categories/${tool.category_id}`)
    
    return {
      success: true
    }
  } catch (error) {
    console.error('Erreur lors de la suppression de l\'outil:', error)
    
    return {
      success: false,
      error: 'Une erreur est survenue lors de la suppression de l\'outil.'
    }
  }
}
```

## Page exemple (app/page.js)

```jsx
import Link from 'next/link'
import Image from 'next/image'
import { Suspense } from 'react'
import { ArrowRight, Search, Star } from 'lucide-react'

import { Button } from '@/components/ui/button'
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'
import { Badge } from '@/components/ui/badge'
import SearchBar from '@/components/modules/SearchBar'
import ToolCard from '@/components/modules/ToolCard'
import CategoryCard from '@/components/modules/CategoryCard'
import { getFeaturedTools } from '@/lib/actions/tools'
import { getCategories } from '@/lib/actions/categories'

export default async function HomePage() {
  // Récupération des données (exécuté côté serveur)
  const categoriesPromise = getCategories({ parentOnly: true })
  const toolsPromise = getFeaturedTools()
  
  return (
    <>
      {/* Hero Section */}
      <section className="bg-gradient-to-r from-brand-primary to-brand-secondary text-white py-20">
        <div className="container-custom text-center">
          <h1 className="text-4xl md:text-5xl lg:text-6xl font-bold mb-6">
            Découvrez les meilleurs outils <br className="hidden md:block" />
            d'IA pour la vidéo
          </h1>
          <p className="text-xl md:text-2xl text-white/80 mb-10 max-w-3xl mx-auto">
            Comparez, évaluez et trouvez l'outil parfait pour transformer votre flux de travail vidéo.
          </p>
          
          <div className="max-w-2xl mx-auto">
            <SearchBar
              placeholder="Rechercher un outil, une catégorie..."
              variant="hero"
            />
          </div>
          
          <div className="mt-8 text-white/70 text-sm">
            <p>Plus de 500 outils IA référencés dans notre base de données</p>
          </div>
        </div>
      </section>
      
      {/* Categories Section */}
      <section className="py-16 bg-gray-50">
        <div className="container-custom">
          <div className="flex justify-between items-center mb-10">
            <div>
              <h2 className="text-3xl font-bold text-gray-900">Catégories</h2>
              <p className="text-gray-600 mt-2">Explorez les outils par catégories</p>
            </div>
            <Button asChild variant="outline">
              <Link href="/categories">
                Toutes les catégories
                <ArrowRight className="ml-2 h-4 w-4" />
              </Link>
            </Button>
          </div>
          
          <Suspense fallback={<CategorySkeletons />}>
            <CategoriesGrid categoriesPromise={categoriesPromise} />
          </Suspense>
        </div>
      </section>
      
      {/* Featured Tools Section */}
      <section className="py-16">
        <div className="container-custom">
          <div className="flex justify-between items-center mb-10">
            <div>
              <h2 className="text-3xl font-bold text-gray-900">Outils vedettes</h2>
              <p className="text-gray-600 mt-2">Les outils les mieux notés et recommandés</p>
            </div>
            <Button asChild>
              <Link href="/search">
                Explorer tous les outils
                <ArrowRight className="ml-2 h-4 w-4" />
              </Link>
            </Button>
          </div>
          
          <Suspense fallback={<ToolSkeletons />}>
            <FeaturedToolsGrid toolsPromise={toolsPromise} />
          </Suspense>
        </div>
      </section>
      
      {/* How It Works Section */}
      <section className="py-16 bg-gray-50">
        <div className="container-custom">
          <div className="text-center mb-12">
            <h2 className="text-3xl font-bold text-gray-900">Comment ça marche</h2>
            <p className="text-gray-600 mt-2 max-w-2xl mx-auto">
              Trouvez facilement l'outil d'IA parfait pour vos projets vidéo
            </p>
          </div>
          
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div className="text-center">
              <div className="w-16 h-16 bg-brand-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
                <Search className="h-8 w-8 text-brand-primary" />
              </div>
              <h3 className="text-xl font-semibold mb-2">Recherchez</h3>
              <p className="text-gray-600">
                Utilisez notre moteur de recherche avancé pour trouver rapidement des outils par fonctionnalité ou besoin.
              </p>
            </div>
            
            <div className="text-center">
              <div className="w-16 h-16 bg-brand-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
                <Star className="h-8 w-8 text-brand-primary" />
              </div>
              <h3 className="text-xl font-semibold mb-2">Comparez</h3>
              <p className="text-gray-600">
                Évaluez les différentes options grâce aux avis vérifiés et aux fiches détaillées.
              </p>
            </div>
            
            <div className="text-center">
              <div className="w-16 h-16 bg-brand-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
                <ArrowRight className="h-8 w-8 text-brand-primary" />
              </div>
              <h3 className="text-xl font-semibold mb-2">Transformez</h3>
              <p className="text-gray-600">
                Améliorez votre flux de travail vidéo grâce aux outils d'IA les plus adaptés à vos besoins.
              </p>
            </div>
          </div>
        </div>
      </section>
      
      {/* CTA Section */}
      <section className="py-16 bg-brand-primary text-white">
        <div className="container-custom text-center">
          <h2 className="text-3xl font-bold mb-4">Vous avez créé un outil d'IA vidéo ?</h2>
          <p className="text-xl text-white/80 mb-8 max-w-2xl mx-auto">
            Rejoignez notre annuaire et présentez votre solution à des milliers de professionnels de la vidéo.
          </p>
          <Button asChild size="lg" variant="secondary">
            <Link href="/submit">
              Soumettre votre outil
            </Link>
          </Button>
        </div>
      </section>
    </>
  )
}

// Composants pour le chargement des données asynchrones
async function CategoriesGrid({ categoriesPromise }) {
  const categories = await categoriesPromise
  
  return (
    <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      {categories.map((category) => (
        <CategoryCard key={category.id} category={category} />
      ))}
    </div>
  )
}

async function FeaturedToolsGrid({ toolsPromise }) {
  const tools = await toolsPromise
  
  return (
    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {tools.map((tool) => (
        <ToolCard key={tool.id} tool={tool} />
      ))}
    </div>
  )
}

// Skeletons pour le chargement
function CategorySkeletons() {
  return (
    <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      {[...Array(8)].map((_, i) => (
        <div key={i} className="bg-white rounded-lg shadow-md p-6 animate-pulse">
          <div className="w-12 h-12 bg-gray-200 rounded-full mb-4"></div>
          <div className="h-6 bg-gray-200 rounded w-1/2 mb-2"></div>
          <div className="h-4 bg-gray-200 rounded w-2/3"></div>
        </div>
      ))}
    </div>
  )
}

function ToolSkeletons() {
  return (
    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {[...Array(6)].map((_, i) => (
        <div key={i} className="bg-white rounded-lg shadow-md p-6 animate-pulse">
          <div className="flex items-start mb-4">
            <div className="w-12 h-12 bg-gray-200 rounded-md mr-4"></div>
            <div>
              <div className="h-6 bg-gray-200 rounded w-3/4 mb-2"></div>
              <div className="h-4 bg-gray-200 rounded w-1/2"></div>
            </div>
          </div>
          <div className="space-y-2">
            <div className="h-4 bg-gray-200 rounded"></div>
            <div className="h-4 bg-gray-200 rounded"></div>
            <div className="h-4 bg-gray-200 rounded w-4/5"></div>
          </div>
          <div className="flex justify-between items-center mt-4">
            <div className="flex space-x-1">
              <div className="h-6 w-12 bg-gray-200 rounded-full"></div>
              <div className="h-6 w-12 bg-gray-200 rounded-full"></div>
            </div>
            <div className="h-8 w-24 bg-gray-200 rounded"></div>
          </div>
        </div>
      ))}