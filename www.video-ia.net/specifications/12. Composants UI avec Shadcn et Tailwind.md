# Composants UI avec Shadcn et Tailwind

L'interface utilisateur de Video-IA repose sur une combinaison de Shadcn UI et Tailwind CSS, permettant de construire une expérience visuelle cohérente, accessible et hautement personnalisable. Cette section détaille l'implémentation des composants UI et la personnalisation du système de design.

## 1. Configuration de base et personnalisation

### Intégration de Tailwind et Shadcn

Tailwind CSS sert de fondation au système de design, tandis que Shadcn UI fournit des composants accessibles et hautement personnalisables. Contrairement à d'autres bibliothèques UI, Shadcn n'est pas installé via npm mais intégré directement dans le code source, permettant une personnalisation complète.

#### Configuration Tailwind (tailwind.config.js)

```javascript
const { fontFamily } = require("tailwindcss/defaultTheme");

/** @type {import('tailwindcss').Config} */
module.exports = {
  darkMode: ["class"],
  content: [
    "./app/**/*.{js,ts,jsx,tsx}",
    "./components/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    container: {
      center: true,
      padding: "2rem",
      screens: {
        "2xl": "1400px",
      },
    },
    extend: {
      colors: {
        border: "hsl(var(--border))",
        input: "hsl(var(--input))",
        ring: "hsl(var(--ring))",
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))",
        },
        secondary: {
          DEFAULT: "hsl(var(--secondary))",
          foreground: "hsl(var(--secondary-foreground))",
        },
        destructive: {
          DEFAULT: "hsl(var(--destructive))",
          foreground: "hsl(var(--destructive-foreground))",
        },
        muted: {
          DEFAULT: "hsl(var(--muted))",
          foreground: "hsl(var(--muted-foreground))",
        },
        accent: {
          DEFAULT: "hsl(var(--accent))",
          foreground: "hsl(var(--accent-foreground))",
        },
        popover: {
          DEFAULT: "hsl(var(--popover))",
          foreground: "hsl(var(--popover-foreground))",
        },
        card: {
          DEFAULT: "hsl(var(--card))",
          foreground: "hsl(var(--card-foreground))",
        },
        // Couleurs spécifiques à Video-IA
        brand: {
          primary: "#4361ee", // Bleu principal
          secondary: "#3a0ca3", // Bleu foncé
          accent: "#4cc9f0", // Bleu clair
          highlight: "#f72585", // Rose/magenta
          success: "#06d6a0", // Vert
          warning: "#ffd166", // Jaune
          error: "#ef476f", // Rouge
        },
      },
      borderRadius: {
        lg: "var(--radius)",
        md: "calc(var(--radius) - 2px)",
        sm: "calc(var(--radius) - 4px)",
      },
      fontFamily: {
        sans: ["var(--font-sans)", ...fontFamily.sans],
        display: ["var(--font-display)", ...fontFamily.sans],
        mono: ["var(--font-mono)", ...fontFamily.mono],
      },
      keyframes: {
        "accordion-down": {
          from: { height: 0 },
          to: { height: "var(--radix-accordion-content-height)" },
        },
        "accordion-up": {
          from: { height: "var(--radix-accordion-content-height)" },
          to: { height: 0 },
        },
        // Animation de fade-in
        "fade-in": {
          "0%": { opacity: 0 },
          "100%": { opacity: 1 },
        },
        // Animation pour le logo
        "logo-spin": {
          "0%": { transform: "rotateY(0deg)" },
          "100%": { transform: "rotateY(360deg)" },
        },
        // Animation pour les cards
        "card-hover": {
          "0%": { transform: "translateY(0)" },
          "100%": { transform: "translateY(-5px)" },
        }
      },
      animation: {
        "accordion-down": "accordion-down 0.2s ease-out",
        "accordion-up": "accordion-up 0.2s ease-out",
        "fade-in": "fade-in 0.4s ease-out",
        "logo-spin": "logo-spin 3s ease-in-out infinite",
        "card-hover": "card-hover 0.3s ease-out forwards",
      },
      // Ombres personnalisées
      boxShadow: {
        subtle: "0 2px 10px rgba(0, 0, 0, 0.05)",
        card: "0 7px 25px rgba(0, 0, 0, 0.08)",
        dropdown: "0 10px 40px rgba(0, 0, 0, 0.12)",
      },
    },
  },
  plugins: [
    require("tailwindcss-animate"),
    require("@tailwindcss/typography"),
    require("@tailwindcss/forms")({
      strategy: 'class', // S'applique uniquement avec les classes form-*
    }),
  ],
};
```

#### Variables CSS globales (app/globals.css)

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Système de couleurs de base */
    --background: 210 40% 98%;
    --foreground: 222.2 84% 4.9%;
    
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    
    --primary: 224.9 76.3% 48%;  /* Bleu Video-IA */
    --primary-foreground: 210 40% 98%;
    
    --secondary: 249.9 63.8% 34.5%;  /* Bleu secondaire Video-IA */
    --secondary-foreground: 210 40% 98%;
    
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    
    --accent: 199.3 76.8% 62%;  /* Bleu accent Video-IA */
    --accent-foreground: 222.2 47.4% 11.2%;
    
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 224.9 76.3% 48%;
    
    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    
    --primary: 224.9 76.3% 48%;
    --primary-foreground: 222.2 47.4% 11.2%;
    
    --secondary: 249.9 63.8% 34.5%;
    --secondary-foreground: 210 40% 98%;
    
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    
    --accent: 199.3 76.8% 62%;
    --accent-foreground: 210 40% 98%;
    
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 224.9 76.3% 48%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
  h1, h2, h3, h4, h5, h6 {
    @apply font-display tracking-tight;
  }
}

/* Classes d'utilité personnalisées */
@layer components {
  .container-custom {
    @apply w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }
  
  .focus-ring {
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background;
  }
  
  .heading-1 {
    @apply text-4xl md:text-5xl lg:text-6xl font-bold;
  }
  
  .heading-2 {
    @apply text-3xl md:text-4xl font-bold;
  }
  
  .heading-3 {
    @apply text-2xl md:text-3xl font-bold;
  }
  
  .gradient-text {
    @apply text-transparent bg-clip-text bg-gradient-to-r from-brand-primary to-brand-secondary;
  }
  
  .card-interactive {
    @apply transition-all duration-300 hover:shadow-card hover:translate-y-[-5px];
  }
  
  .section-padding {
    @apply py-12 md:py-16 lg:py-20;
  }
}
```

### Système de typographie

Une typographie cohérente est essentielle pour une interface utilisateur professionnelle. Video-IA utilise une combinaison de polices avec des rôles différents:

```jsx
// app/layout.js
import { Inter, Manrope, JetBrains_Mono } from 'next/font/google'

// Police principale pour le texte
const inter = Inter({ 
  subsets: ['latin'],
  display: 'swap',
  variable: '--font-sans',
})

// Police pour les titres
const manrope = Manrope({
  subsets: ['latin'],
  display: 'swap',
  variable: '--font-display',
})

// Police pour le code
const jetbrainsMono = JetBrains_Mono({
  subsets: ['latin'],
  display: 'swap',
  variable: '--font-mono',
})

export default function RootLayout({ children }) {
  return (
    <html lang="fr" suppressHydrationWarning>
      <body className={`${inter.variable} ${manrope.variable} ${jetbrainsMono.variable} font-sans`}>
        {children}
      </body>
    </html>
  )
}
```

## 2. Composants UI personnalisés

### Composants de base étendus

Shadcn UI offre des composants de base que nous avons étendus avec des variantes spécifiques à Video-IA.

#### Bouton personnalisé (components/ui/button.jsx)

```jsx
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva } from "class-variance-authority"

import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        destructive: "bg-destructive text-destructive-foreground hover:bg-destructive/90",
        outline: "border border-input bg-background hover:bg-accent hover:text-accent-foreground",
        secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline",
        brand: "bg-brand-primary text-white hover:bg-brand-primary/90",
        gradient: "bg-gradient-to-r from-brand-primary to-brand-secondary text-white hover:opacity-90",
        success: "bg-brand-success text-white hover:bg-brand-success/90",
        warning: "bg-brand-warning text-black hover:bg-brand-warning/90",
        error: "bg-brand-error text-white hover:bg-brand-error/90",
      },
      size: {
        default: "h-10 px-4 py-2",
        xs: "h-7 rounded-md px-2.5 text-xs",
        sm: "h-9 rounded-md px-3",
        lg: "h-11 rounded-md px-8",
        xl: "h-12 rounded-md px-10 text-base",
        "2xl": "h-14 rounded-md px-12 text-lg",
        icon: "h-10 w-10",
      },
      motion: {
        default: "",
        pulse: "animate-pulse",
        bounce: "hover:animate-bounce",
        wiggle: "hover:animate-wiggle",
      },
      width: {
        auto: "w-auto",
        full: "w-full",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
      motion: "default",
      width: "auto",
    },
  }
)

const Button = React.forwardRef(({ 
  className, 
  variant, 
  size, 
  motion,
  width,
  asChild = false, 
  ...props 
}, ref) => {
  const Comp = asChild ? Slot : "button"
  return (
    <Comp
      className={cn(buttonVariants({ variant, size, motion, width, className }))}
      ref={ref}
      {...props}
    />
  )
})
Button.displayName = "Button"

export { Button, buttonVariants }
```

#### Badge personnalisé (components/ui/badge.jsx)

```jsx
import * as React from "react"
import { cva } from "class-variance-authority"

import { cn } from "@/lib/utils"

const badgeVariants = cva(
  "inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",
  {
    variants: {
      variant: {
        default:
          "border-transparent bg-primary text-primary-foreground hover:bg-primary/80",
        secondary:
          "border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",
        destructive:
          "border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",
        outline: "text-foreground",
        success:
          "border-transparent bg-brand-success text-white hover:bg-brand-success/80",
        warning:
          "border-transparent bg-brand-warning text-black hover:bg-brand-warning/80",
        error:
          "border-transparent bg-brand-error text-white hover:bg-brand-error/80",
        ghost:
          "border-transparent bg-muted text-muted-foreground hover:bg-muted/80",
        tag:
          "border-transparent bg-blue-100 text-blue-800 hover:bg-blue-200 dark:bg-blue-900/30 dark:text-blue-300",
        price:
          "border-transparent bg-purple-100 text-purple-800 hover:bg-purple-200 dark:bg-purple-900/30 dark:text-purple-300",
      },
      size: {
        default: "px-2.5 py-0.5 text-xs",
        sm: "px-2 py-0.5 text-[10px]",
        lg: "px-3 py-1 text-sm",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

function Badge({
  className,
  variant,
  size,
  ...props
}) {
  return (
    <div className={cn(badgeVariants({ variant, size }), className)} {...props} />
  )
}

export { Badge, badgeVariants }
```

### Composants métier spécifiques

Au-delà des composants UI de base, Video-IA inclut des composants métier pour répondre à des besoins spécifiques.

#### ToolCard (components/modules/ToolCard.jsx)

```jsx
import { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from "@/components/ui/card"
import { Badge } from "@/components/ui/badge"
import { Button } from "@/components/ui/button"
import Link from "next/link"
import Image from "next/image"
import { StarIcon, ExternalLinkIcon } from "lucide-react"
import { cn } from "@/lib/utils"

export default function ToolCard({ 
  tool, 
  layout = "default", 
  showDescription = true,
  showActions = true,
  showRating = true,
  className,
  ...props 
}) {
  const { 
    id, 
    name, 
    slug, 
    short_desc, 
    logo_url, 
    pricing_type, 
    category, 
    rating = 0,
    reviews = [],
    is_featured = false,
    tags = [],
  } = tool
  
  const priceBadgeVariant = 
    pricing_type === 'free' ? 'success' : 
    pricing_type === 'freemium' ? 'warning' : 
    pricing_type === 'trial' ? 'ghost' : 'price'
  
  const priceBadgeText = 
    pricing_type === 'free' ? 'Gratuit' : 
    pricing_type === 'freemium' ? 'Freemium' : 
    pricing_type === 'trial' ? 'Essai gratuit' : 'Payant'
  
  // Variantes de layout
  if (layout === "featured") {
    return (
      <Card className={cn("overflow-hidden h-full transition-all duration-300 hover:shadow-lg", className)} {...props}>
        <div className="flex flex-col h-full">
          <div className="relative h-40 bg-gradient-to-r from-brand-primary/10 to-brand-secondary/10">
            {logo_url ? (
              <Image 
                src={logo_url} 
                alt={name} 
                fill 
                className="object-contain p-6" 
                sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
              />
            ) : (
              <div className="w-full h-full flex items-center justify-center">
                <span className="text-4xl font-bold text-gray-300">
                  {name.charAt(0)}
                </span>
              </div>
            )}
            <div className="absolute top-4 right-4 flex flex-col gap-2">
              <Badge variant={priceBadgeVariant}>
                {priceBadgeText}
              </Badge>
              {is_featured && (
                <Badge variant="secondary">Vedette</Badge>
              )}
            </div>
          </div>
          
          <CardHeader className="pb-2">
            <div className="flex justify-between items-start">
              <div>
                <CardTitle className="text-xl">
                  <Link href={`/tools/${slug}`} className="hover:text-primary transition-colors">
                    {name}
                  </Link>
                </CardTitle>
                <CardDescription>
                  <Link href={`/categories/${category.slug}`} className="hover:underline">
                    {category.name}
                  </Link>
                </CardDescription>
              </div>
            </div>
          </CardHeader>
          
          <CardContent className="flex-grow">
            {showDescription && (
              <p className="text-muted-foreground line-clamp-3 mb-4">{short_desc}</p>
            )}
            
            {showRating && (
              <div className="flex items-center mt-auto">
                <div className="flex text-yellow-400">
                  {[...Array(5)].map((_, i) => (
                    <StarIcon 
                      key={i}
                      className={`w-4 h-4 ${i < Math.round(rating) ? 'fill-current' : 'stroke-current fill-transparent'}`} 
                    />
                  ))}
                </div>
                <span className="text-xs text-muted-foreground ml-2">
                  {rating.toFixed(1)} ({reviews.length} avis)
                </span>
              </div>
            )}
          </CardContent>
          
          {showActions && (
            <CardFooter className="pt-0 gap-2">
              <Button asChild variant="default" size="sm" className="flex-1">
                <Link href={`/tools/${slug}`}>
                  Détails
                </Link>
              </Button>
              <Button asChild variant="outline" size="sm" className="flex-1">
                <a href={tool.website} target="_blank" rel="noopener noreferrer">
                  <ExternalLinkIcon className="mr-1 h-3 w-3" />
                  Site
                </a>
              </Button>
            </CardFooter>
          )}
        </div>
      </Card>
    )
  }
  
  // Layout par défaut
  return (
    <Card className={cn("card-interactive h-full", className)} {...props}>
      <CardHeader className="pb-2">
        <div className="flex justify-between items-start">
          <div className="flex items-center space-x-4">
            <div className="relative w-12 h-12 overflow-hidden rounded-md">
              {logo_url ? (
                <Image 
                  src={logo_url} 
                  alt={name} 
                  fill 
                  className="object-contain" 
                  sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
                />
              ) : (
                <div className="w-full h-full bg-muted flex items-center justify-center">
                  <span className="text-lg font-bold text-muted-foreground">
                    {name.charAt(0)}
                  </span>
                </div>
              )}
            </div>
            <div>
              <CardTitle className="text-xl">
                <Link href={`/tools/${slug}`} className="hover:text-primary transition-colors">
                  {name}
                </Link>
              </CardTitle>
              <CardDescription>
                <Link href={`/categories/${category.slug}`} className="hover:underline">
                  {category.name}
                </Link>
              </CardDescription>
            </div>
          </div>
          <Badge variant={priceBadgeVariant}>
            {priceBadgeText}
          </Badge>
        </div>
      </CardHeader>
      
      <CardContent className="flex-grow">
        {showDescription && (
          <p className="text-sm text-muted-foreground line-clamp-3 mb-4">{short_desc}</p>
        )}
        
        {showRating && (
          <div className="flex items-center mt-4">
            <div className="flex text-yellow-400">
              {[...Array(5)].map((_, i) => (
                <StarIcon 
                  key={i}
                  className={`w-4 h-4 ${i < Math.round(rating) ? 'fill-current' : 'stroke-current fill-transparent'}`} 
                />
              ))}
            </div>
            <span className="text-xs text-muted-foreground ml-2">
              {rating.toFixed(1)} ({reviews.length} avis)
            </span>
          </div>
        )}
      </CardContent>
      
      {showActions && (
        <CardFooter className="pt-2">
          <div className="w-full flex justify-between items-center">
            <div className="flex flex-wrap gap-1">
              {tags.slice(0, 2).map(tag => (
                <Badge key={tag.id} variant="tag" className="text-xs">
                  {tag.name}
                </Badge>
              ))}
              {tags.length > 2 && (
                <Badge variant="outline" className="text-xs">
                  +{tags.length - 2}
                </Badge>
              )}
            </div>
            <Button asChild size="sm" className="ml-auto">
              <Link href={`/tools/${slug}`}>
                Voir détails
              </Link>
            </Button>
          </div>
        </CardFooter>
      )}
    </Card>
  )
}
```

#### SearchBar (components/modules/SearchBar.jsx)

```jsx
'use client'

import { useState, useEffect, useRef } from 'react'
import { useRouter } from 'next/navigation'
import { Search, X, Loader2 } from 'lucide-react'
import { Input } from '@/components/ui/input'
import { Button } from '@/components/ui/button'
import { 
  CommandDialog,
  CommandEmpty,
  CommandGroup,
  CommandInput,
  CommandItem,
  CommandList,
} from '@/components/ui/command'
import { Skeleton } from '@/components/ui/skeleton'
import { Badge } from '@/components/ui/badge'
import { useDebounce } from '@/lib/hooks/useDebounce'
import { cn } from '@/lib/utils'

export default function SearchBar({ 
  placeholder = 'Rechercher un outil...', 
  variant = 'default',
  size = 'default',
  className,
  ...props
}) {
  const [open, setOpen] = useState(false)
  const [query, setQuery] = useState('')
  const [results, setResults] = useState({ tools: [], categories: [], tags: [] })
  const [isLoading, setIsLoading] = useState(false)
  const [recentSearches, setRecentSearches] = useState([])
  const inputRef = useRef(null)
  const router = useRouter()
  
  // Debounce de la recherche pour éviter trop de requêtes
  const debouncedQuery = useDebounce(query, 300)
  
  // Récupération des recherches récentes depuis localStorage
  useEffect(() => {
    if (typeof window !== 'undefined') {
      const storedSearches = localStorage.getItem('recentSearches')
      if (storedSearches) {
        try {
          setRecentSearches(JSON.parse(storedSearches).slice(0, 5))
        } catch (e) {
          console.error('Erreur lors de la récupération des recherches récentes:', e)
        }
      }
    }
  }, [])
  
  // Effet pour ouvrir/fermer avec le raccourci clavier
  useEffect(() => {
    const down = (e) => {
      if (e.key === 'k' && (e.metaKey || e.ctrlKey)) {
        e.preventDefault()
        setOpen((open) => !open)
      }
    }
    
    document.addEventListener('keydown', down)
    return () => document.removeEventListener('keydown', down)
  }, [])
  
  // Effet pour rechercher quand la requête change
  useEffect(() => {
    if (!debouncedQuery || debouncedQuery.length < 2) {
      setResults({ tools: [], categories: [], tags: [] })
      return
    }
    
    const performSearch = async () => {
      setIsLoading(true)
      try {
        const response = await fetch(`/api/search?q=${encodeURIComponent(debouncedQuery)}`)
        if (!response.ok) throw new Error('Erreur lors de la recherche')
        
        const data = await response.json()
        setResults(data)
      } catch (error) {
        console.error('Erreur de recherche:', error)
      } finally {
        setIsLoading(false)
      }
    }
    
    performSearch()
  }, [debouncedQuery])
  
  // Gestion de la navigation vers la recherche
  const handleSearch = () => {
    if (query.trim()) {
      // Enregistrement dans l'historique récent
      const newRecentSearches = [
        query,
        ...recentSearches.filter(item => item !== query)
      ].slice(0, 5)
      
      setRecentSearches(newRecentSearches)
      localStorage.setItem('recentSearches', JSON.stringify(newRecentSearches))
      
      // Navigation
      router.push(`/search?q=${encodeURIComponent(query.trim())}`)
      setOpen(false)
    }
  }
  
  // Gestion de la touche Entrée pour valider
  const handleKeyDown = (e) => {
    if (e.key === 'Enter') {
      handleSearch()
    }
  }
  
  // Variante avec fond transparent pour le hero
  if (variant === 'hero') {
    return (
      <div className={cn("relative w-full max-w-3xl mx-auto", className)} {...props}>
        <div className="relative flex items-center">
          <Search className="absolute left-4 top-1/2 -translate-y-1/2 text-white/70 h-5 w-5" />
          <Input
            ref={inputRef}
            value={query}
            onChange={(e) => setQuery(e.target.value)}
            onKeyDown={handleKeyDown}
            placeholder={placeholder}
            className="pl-12 pr-20 py-6 w-full bg-white/10 text-white border-white/20 placeholder:text-white/70 focus:bg-white/20 text-lg"
            onClick={() => setOpen(true)}
          />
          <kbd className="absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none hidden sm:inline-flex h-5 select-none items-center gap-1 rounded border border-white/30 bg-white/10 px-1.5 font-mono text-[10px] font-medium text-white/70 opacity-100">
            <span className="text-xs">⌘</span>K
          </kbd>
        </div>
        
        <CommandDialog open={open} onOpenChange={setOpen}>
          {renderCommandContent()}
        </CommandDialog>
      </div>
    )
  }
  
  // Variante par défaut
  return (
    <div className={cn("relative max-w-md w-full", className)} {...props}>
      <div className="relative flex items-center">
        <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground h-4 w-4" />
        <Input
          ref={inputRef}
          value={query}
          onChange={(e) => setQuery(e.target.value)}
          onKeyDown={handleKeyDown}
          placeholder={placeholder}
          className={cn(
            "pl-10 pr-10",
            size === 'sm' ? 'h-8 text-sm' : 'h-10',
            size === 'lg' && 'h-12 text-lg pl-12 pr-12'
          )}
          onClick={() => setOpen(true)}
        />
        {query && (
          <X 
            className={cn(
              "absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground cursor-pointer",
              size === 'sm' ? 'h-3 w-3' : 'h-4 w-4',
              size === 'lg' && 'h-5 w-5 right-4'
            )}
            onClick={() => setQuery('')}
          />
        )}
      </div>
      
      <div className="absolute right-3 top-1/2 -translate-y-1/2 flex items-center">
        <kbd className="hidden md:flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100">
          <span className="text-xs">⌘</span>K
        </kbd>
      </div>
      
      <CommandDialog open={open} onOpenChange={setOpen}>
        {renderCommandContent()}
      </CommandDialog>
    </div>
  )
  
  // Fonction pour le contenu de la boîte de dialogue de commande
  function renderCommandContent() {
    return (
      <>
        <CommandInput 
          placeholder={placeholder} 
          value={query}
          onValueChange={setQuery}
        />
        <CommandList>
          {isLoading ? (
            <div className="py-6 px-4">
              <div className="space-y-2">
                <Skeleton className="h-4 w-3/4" />
                <Skeleton className="h-10 w-full" />
                <Skeleton className="h-10 w-full" />
              </div>
            </div>
          ) : (
            <>
              <CommandEmpty>
                {query.length > 0 ? (
                  <>
                    Aucun résultat trouvé pour "{query}"
                    <Button
                      variant="outline"
                      size="sm"
                      className="mt-2 w-full"
                      onClick={() => {
                        router.push(`/search?q=${encodeURIComponent(query)}`)
                        setOpen(false)
                      }}
                    >
                      Recherche avancée
                    </Button>
                  </>
                ) : (
                  "Commencez à taper pour rechercher"
                )}
              </CommandEmpty>
              
              {/* Recherches récentes */}
              {recentSearches.length > 0 && query.length === 0 && (
                <CommandGroup heading="Recherches récentes">
                  {recentSearches.map((term, index) => (
                    <CommandItem
                      key={`recent-${index}`}
                      onSelect={() => {
                        router.push(`/search?q=${encodeURIComponent(term)}`)
                        setOpen(false)
                      }}
                    >
                      <Search className="mr-2 h-4 w-4 text-muted-foreground" />
                      <span>{term}</span>
                    </CommandItem>
                  ))}
                </CommandGroup>
              )}
              
              {/* Résultats des outils */}
              {results.tools?.length > 0 && (
                <CommandGroup heading="Outils">
                  {results.tools.map((tool) => (
                    <CommandItem
                      key={`tool-${tool.id}`}
                      onSelect={() => {
                        router.push(`/tools/${tool.slug}`)
                        setOpen(false)
                      }}
                    >
                      <div className="flex items-center w-full">
                        {tool.logo_url && (
                          <div className="w-6 h-6 mr-2 overflow-hidden rounded bg-muted flex items-center justify-center">
                            <img 
                              src={tool.logo_url} 
                              alt={tool.name} 
                              className="w-full h-full object-contain"
                            />
                          </div>
                        )}
                        <span className="flex-grow truncate">{tool.name}</span>
                        <Badge variant="outline" className="ml-2 text-xs">
                          {tool.pricing_type === 'free' ? 'Gratuit' : 
                           tool.pricing_type === 'freemium' ? 'Freemium' : 
                           tool.pricing_type === 'trial' ? 'Essai' : 'Payant'}
                        </Badge>
                      </div>
                    </CommandItem>
                  ))}
                </CommandGroup>
              )}
              
              {/* Résultats des catégories */}
              {results.categories?.length > 0 && (
                <CommandGroup heading="Catégories">
                  {results.categories.map((category) => (
                    <CommandItem
                      key={`category-${category.id}`}
                      onSelect={() => {
                        router.push(`/categories/${category.slug}`)
                        setOpen(false)
                      }}
                    >
                      {category.name}
                      {category.toolCount && (
                        <Badge variant="outline" className="ml-2 text-xs">
                          {category.toolCount} outils
                        </Badge>
                      )}
                    </CommandItem>
                  ))}
                </CommandGroup>
              )}
              
              {/* Résultats des tags */}
              {results.tags?.length > 0 && (
                <CommandGroup heading="Tags">
                  {results.tags.map((tag) => (
                    <CommandItem
                      key={`tag-${tag.id}`}
                      onSelect={() => {
                        router.push(`/search?tag=${tag.slug}`)
                        setOpen(false)
                      }}
                    >
                      <span className="text-muted-foreground">#</span>{tag.name}
                    </CommandItem>
                  ))}
                </CommandGroup>
              )}
              
              {/* Option de recherche complète */}
              {query.length > 1 && (
                <CommandItem
                  onSelect={() => {
                    router.push(`/search?q=${encodeURIComponent(query)}`)
                    setOpen(false)
                  }}
                >
                  <Search className="mr-2 h-4 w-4" />
                  <span>Rechercher "{query}" dans tous les outils</span>
                </CommandItem>
              )}
            </>
          )}
        </CommandList>
      </>
    )
  }
}
```

#### Rating System (components/modules/RatingStars.jsx)

```jsx
'use client'

import { useState } from 'react'
import { Star } from 'lucide-react'
import { cn } from '@/lib/utils'

export function RatingDisplay({ 
  rating = 0, 
  size = 'default',
  className,
  showValue = false,
  ...props 
}) {
  // Conversion en nombre et limitation entre 0 et 5
  const numericRating = Math.min(Math.max(Number(rating) || 0, 0), 5)
  
  // Taille des étoiles selon la prop size
  const starSize = size === 'sm' ? 'w-3 h-3' : 
                  size === 'lg' ? 'w-6 h-6' : 'w-4 h-4'
  
  return (
    <div className={cn("flex items-center", className)} {...props}>
      <div className="flex text-yellow-400">
        {[...Array(5)].map((_, i) => {
          // Calcul pour les étoiles partielles
          const starValue = i + 1
          const diff = numericRating - i
          
          return (
            <span key={i} className="relative">
              {/* Étoile de base (contour) */}
              <Star 
                className={cn(
                  starSize,
                  "stroke-current text-yellow-400"
                )} 
                fill="transparent"
              />
              
              {/* Remplissage de l'étoile */}
              {diff > 0 && (
                <span 
                  className="absolute inset-0 overflow-hidden" 
                  style={{ width: `${Math.min(diff, 1) * 100}%` }}
                >
                  <Star 
                    className={cn(
                      starSize,
                      "text-yellow-400 fill-current"
                    )} 
                  />
                </span>
              )}
            </span>
          )
        })}
      </div>
      
      {showValue && (
        <span className="ml-2 text-sm font-medium">
          {numericRating.toFixed(1)}
        </span>
      )}
    </div>
  )
}

export function RatingInput({ 
  value = 0, 
  onChange, 
  size = 'default',
  className,
  disabled = false,
  ...props 
}) {
  const [hoverValue, setHoverValue] = useState(0)
  
  // Taille des étoiles selon la prop size
  const starSize = size === 'sm' ? 'w-4 h-4' : 
                  size === 'lg' ? 'w-8 h-8' : 'w-6 h-6'
  
  // Gestion du survol et du clic
  const handleHover = (rating) => {
    if (!disabled) {
      setHoverValue(rating)
    }
  }
  
  const handleClick = (rating) => {
    if (!disabled && onChange) {
      onChange(rating)
    }
  }
  
  return (
    <div 
      className={cn(
        "flex", 
        disabled ? "opacity-60 cursor-not-allowed" : "cursor-pointer",
        className
      )} 
      onMouseLeave={() => handleHover(0)}
      {...props}
    >
      {[...Array(5)].map((_, i) => {
        const starValue = i + 1
        const isFilled = (hoverValue || value) >= starValue
        
        return (
          <span 
            key={i}
            className="relative p-1"
            onMouseEnter={() => handleHover(starValue)}
            onClick={() => handleClick(starValue)}
          >
            <Star 
              className={cn(
                starSize,
                "transition-colors",
                isFilled
                  ? "text-yellow-400 fill-current"
                  : "text-gray-300 dark:text-gray-600"
              )}
            />
          </span>
        )
      })}
    </div>
  )
}

// Composant unifié pour flexibilité d'usage
export default function RatingStars({ 
  interactive = false, 
  value = 0, 
  onChange,
  size = 'default',
  className,
  showValue = false,
  disabled = false,
  ...props 
}) {
  return interactive ? (
    <RatingInput 
      value={value} 
      onChange={onChange} 
      size={size}
      className={className}
      disabled={disabled}
      {...props}
    />
  ) : (
    <RatingDisplay 
      rating={value} 
      size={size}
      className={className}
      showValue={showValue}
      {...props}
    />
  )
}
```

## 3. Composants complexes et patterns

### Système de Tabs pour les interfaces à multiples vues

```jsx
'use client'

import { useState, useEffect } from 'react'
import { useRouter, useSearchParams } from 'next/navigation'
import { Tabs, TabsList, TabsTrigger, TabsContent } from '@/components/ui/tabs'

/**
 * Tabs avec persistance dans l'URL
 */
export function PersistedTabs({
  defaultValue,
  paramName = 'tab',
  tabOptions,
  onChange,
  className,
  children,
  ...props
}) {
  const router = useRouter()
  const searchParams = useSearchParams()
  
  // Récupération de l'onglet depuis l'URL ou valeur par défaut
  const initialValue = searchParams.get(paramName) || defaultValue
  const [activeTab, setActiveTab] = useState(initialValue)
  
  // Mise à jour de l'URL quand l'onglet change
  useEffect(() => {
    if (activeTab !== searchParams.get(paramName)) {
      const params = new URLSearchParams(searchParams.toString())
      params.set(paramName, activeTab)
      router.replace(`?${params.toString()}`, { scroll: false })
    }
  }, [activeTab, paramName, router, searchParams])
  
  // Gestion du changement d'onglet
  const handleTabChange = (value) => {
    setActiveTab(value)
    if (onChange) {
      onChange(value)
    }
  }
  
  return (
    <Tabs
      defaultValue={activeTab}
      value={activeTab}
      onValueChange={handleTabChange}
      className={className}
      {...props}
    >
      <TabsList>
        {tabOptions.map((tab) => (
          <TabsTrigger key={tab.value} value={tab.value}>
            {tab.icon && <span className="mr-2">{tab.icon}</span>}
            {tab.label}
          </TabsTrigger>
        ))}
      </TabsList>
      {children}
    </Tabs>
  )
}

/**
 * Contenu de Tab avec chargement paresseux
 */
export function LazyTabContent({
  value,
  activeTab,
  fallback = null,
  children
}) {
  const [hasBeenActive, setHasBeenActive] = useState(value === activeTab)
  
  // Marquer comme ayant été activé une fois
  useEffect(() => {
    if (value === activeTab && !hasBeenActive) {
      setHasBeenActive(true)
    }
  }, [activeTab, hasBeenActive, value])
  
  return (
    <TabsContent value={value}>
      {hasBeenActive ? children : fallback}
    </TabsContent>
  )
}
```

### Pagination optimisée pour SEO et accessibilité

```jsx
import Link from 'next/link'
import { ChevronLeft, ChevronRight, MoreHorizontal } from 'lucide-react'
import { Button } from '@/components/ui/button'
import { cn } from '@/lib/utils'

export default function Pagination({
  totalItems,
  pageSize = 10,
  currentPage = 1,
  siblingCount = 1,
  className,
  linkBuilder = (page) => `?page=${page}`,
  ...props
}) {
  // Calcul du nombre total de pages
  const totalPages = Math.ceil(totalItems / pageSize)
  
  // Si une seule page, ne pas afficher la pagination
  if (totalPages <= 1) {
    return null
  }
  
  // Fonction pour créer la plage de pagination
  const generatePagination = () => {
    // Nombre total de boutons à afficher (incluant ellipses)
    const totalNumbers = siblingCount * 2 + 5
    
    // Si on a moins de pages que de boutons prévus, tout afficher
    if (totalPages <= totalNumbers) {
      return Array.from({ length: totalPages }, (_, i) => i + 1)
    }
    
    // Calcul des indices aux extrêmes et au centre
    const leftSiblingIndex = Math.max(currentPage - siblingCount, 1)
    const rightSiblingIndex = Math.min(currentPage + siblingCount, totalPages)
    
    // Détermination des ellipses
    const shouldShowLeftDots = leftSiblingIndex > 2
    const shouldShowRightDots = rightSiblingIndex < totalPages - 1
    
    // Première et dernière page toujours visibles
    const firstPageIndex = 1
    const lastPageIndex = totalPages
    
    // Cas 1: Ellipses seulement à droite
    if (!shouldShowLeftDots && shouldShowRightDots) {
      const leftRange = Array.from(
        { length: leftSiblingIndex + siblingCount + 1 },
        (_, i) => i + 1
      )
      return [...leftRange, 'DOTS', lastPageIndex]
    }
    
    // Cas 2: Ellipses seulement à gauche
    if (shouldShowLeftDots && !shouldShowRightDots) {
      const rightItems = totalNumbers - 2 // -2 pour première page et ellipses
      const rightRange = Array.from(
        { length: rightItems },
        (_, i) => totalPages - rightItems + i + 1
      )
      return [firstPageIndex, 'DOTS', ...rightRange]
    }
    
    // Cas 3: Ellipses des deux côtés
    if (shouldShowLeftDots && shouldShowRightDots) {
      const middleRange = Array.from(
        { length: rightSiblingIndex - leftSiblingIndex + 1 },
        (_, i) => leftSiblingIndex + i
      )
      return [firstPageIndex, 'DOTS', ...middleRange, 'DOTS', lastPageIndex]
    }
  }
  
  const paginationRange = generatePagination()
  
  return (
    <nav
      role="navigation"
      aria-label="Pagination"
      className={cn("flex justify-center items-center mt-8", className)}
      {...props}
    >
      <ul className="flex items-center gap-1">
        {/* Bouton précédent */}
        <li>
          <Button
            as={currentPage === 1 ? 'span' : Link}
            href={currentPage > 1 ? linkBuilder(currentPage - 1) : undefined}
            variant="outline"
            size="icon"
            disabled={currentPage === 1}
            aria-label="Page précédente"
            className={cn(
              currentPage === 1 && "opacity-50 cursor-not-allowed"
            )}
          >
            <ChevronLeft className="h-4 w-4" />
          </Button>
        </li>
        
        {/* Pages numérotées et ellipses */}
        {paginationRange.map((page, index) => {
          if (page === 'DOTS') {
            return (
              <li key={`dots-${index}`}>
                <span className="flex items-center justify-center w-10 h-10">
                  <MoreHorizontal className="h-5 w-5 text-muted-foreground" />
                </span>
              </li>
            )
          }
          
          return (
            <li key={page}>
              <Button
                as={Link}
                href={linkBuilder(page)}
                variant={currentPage === page ? "default" : "outline"}
                size="icon"
                aria-label={`Page ${page}`}
                aria-current={currentPage === page ? "page" : undefined}
                className="w-10 h-10"
              >
                {page}
              </Button>
            </li>
          )
        })}
        
        {/* Bouton suivant */}
        <li>
          <Button
            as={currentPage === totalPages ? 'span' : Link}
            href={currentPage < totalPages ? linkBuilder(currentPage + 1) : undefined}
            variant="outline"
            size="icon"
            disabled={currentPage === totalPages}
            aria-label="Page suivante"
            className={cn(
              currentPage === totalPages && "opacity-50 cursor-not-allowed"
            )}
          >
            <ChevronRight className="h-4 w-4" />
          </Button>
        </li>
      </ul>
    </nav>
  )
}
```

### Carousel d'éléments avec contrôles accessibles

```jsx
'use client'

import { useState, useEffect, useRef, useCallback } from 'react'
import { ChevronLeft, ChevronRight } from 'lucide-react'
import { Button } from '@/components/ui/button'
import { cn } from '@/lib/utils'
import { useMediaQuery } from '@/lib/hooks/useMediaQuery'

export default function Carousel({
  children,
  options = {},
  controls = true,
  pagination = true,
  autoplay = false,
  autoplayInterval = 5000,
  className,
  ...props
}) {
  const [currentIndex, setCurrentIndex] = useState(0)
  const [isHovering, setIsHovering] = useState(false)
  const [containerWidth, setContainerWidth] = useState(0)
  const [slideWidth, setSlideWidth] = useState(0)
  const [slidesToShow, setSlidesToShow] = useState(1)
  const containerRef = useRef(null)
  const autoplayTimerRef = useRef(null)
  
  // Media queries pour responsive
  const isMobile = useMediaQuery('(max-width: 640px)')
  const isTablet = useMediaQuery('(min-width: 641px) and (max-width: 1024px)')
  
  // Configuration des options par défaut et responsives
  const defaultOptions = {
    slidesToShow: isMobile ? 1 : isTablet ? 2 : 3,
    slidesToScroll: 1,
    infinite: true,
    responsive: [
      {
        breakpoint: 640,
        settings: {
          slidesToShow: 1,
        }
      },
      {
        breakpoint: 1024,
        settings: {
          slidesToShow: 2,
        }
      }
    ]
  }
  
  // Fusion des options par défaut et celles fournies
  const carouselOptions = { ...defaultOptions, ...options }
  
  // Nombre total d'éléments
  const childrenArray = Array.isArray(children) ? children : [children]
  const totalSlides = childrenArray.length
  
  // Calcul des dimensions lors du chargement ou redimensionnement
  useEffect(() => {
    const updateDimensions = () => {
      if (containerRef.current) {
        const containerWidth = containerRef.current.clientWidth
        setContainerWidth(containerWidth)
        
        // Détermination du nombre de slides à afficher selon la taille
        let slidesToShow = carouselOptions.slidesToShow
        
        if (carouselOptions.responsive) {
          carouselOptions.responsive.forEach(item => {
            if (window.innerWidth <= item.breakpoint) {
              slidesToShow = item.settings.slidesToShow
            }
          })
        }
        
        setSlidesToShow(slidesToShow)
        setSlideWidth(containerWidth / slidesToShow)
      }
    }
    
    // Initialisation
    updateDimensions()
    
    // Mise à jour lors du redimensionnement
    window.addEventListener('resize', updateDimensions)
    
    return () => {
      window.removeEventListener('resize', updateDimensions)
    }
  }, [carouselOptions.slidesToShow, carouselOptions.responsive])
  
  // Gestion de l'autoplay
  useEffect(() => {
    if (autoplay && !isHovering) {
      autoplayTimerRef.current = setInterval(() => {
        goToNext()
      }, autoplayInterval)
    }
    
    return () => {
      if (autoplayTimerRef.current) {
        clearInterval(autoplayTimerRef.current)
      }
    }
  }, [autoplay, isHovering, autoplayInterval, currentIndex])
  
  // Navigation
  const goToPrevious = useCallback(() => {
    setCurrentIndex(prevIndex => {
      if (prevIndex === 0) {
        return carouselOptions.infinite ? totalSlides - slidesToShow : 0
      }
      return Math.max(prevIndex - carouselOptions.slidesToScroll, 0)
    })
  }, [carouselOptions.infinite, carouselOptions.slidesToScroll, totalSlides, slidesToShow])
  
  const goToNext = useCallback(() => {
    setCurrentIndex(prevIndex => {
      const maxIndex = totalSlides - slidesToShow
      if (prevIndex >= maxIndex) {
        return carouselOptions.infinite ? 0 : maxIndex
      }
      return Math.min(prevIndex + carouselOptions.slidesToScroll, maxIndex)
    })
  }, [carouselOptions.infinite, carouselOptions.slidesToScroll, totalSlides, slidesToShow])
  
  const goToSlide = useCallback((index) => {
    setCurrentIndex(Math.min(Math.max(0, index), totalSlides - slidesToShow))
  }, [totalSlides, slidesToShow])
  
  // Gestion du défilement tactile
  const startX = useRef(0)
  const [isDragging, setIsDragging] = useState(false)
  
  const handleTouchStart = (e) => {
    startX.current = e.touches[0].clientX
    setIsDragging(true)
  }
  
  const handleTouchMove = (e) => {
    if (!isDragging) return
    
    const currentX = e.touches[0].clientX
    const diff = startX.current - currentX
    
    if (Math.abs(diff) > 50) { // Seuil de déplacement
      if (diff > 0) {
        goToNext()
      } else {
        goToPrevious()
      }
      setIsDragging(false)
    }
  }
  
  const handleTouchEnd = () => {
    setIsDragging(false)
  }
  
  return (
    <div 
      className={cn("relative", className)}
      onMouseEnter={() => setIsHovering(true)}
      onMouseLeave={() => setIsHovering(false)}
      {...props}
    >
      <div 
        ref={containerRef}
        className="overflow-hidden"
        onTouchStart={handleTouchStart}
        onTouchMove={handleTouchMove}
        onTouchEnd={handleTouchEnd}
      >
        <div 
          className="flex transition-transform duration-300 ease-out"
          style={{ 
            transform: `translateX(-${currentIndex * slideWidth}px)`,
            width: containerWidth ? `${slideWidth * totalSlides}px` : '100%'
          }}
        >
          {childrenArray.map((child, index) => (
            <div 
              key={index} 
              style={{ width: slideWidth ? `${slideWidth}px` : `${100 / slidesToShow}%` }} 
              className="flex-shrink-0"
            >
              <div className="px-2 h-full">
                {child}
              </div>
            </div>
          ))}
        </div>
      </div>
      
      {/* Contrôles de navigation */}
      {controls && totalSlides > slidesToShow && (
        <div className="flex justify-center mt-4 gap-2">
          <Button
            variant="outline"
            size="icon"
            className="rounded-full"
            onClick={goToPrevious}
            aria-label="Précédent"
            disabled={!carouselOptions.infinite && currentIndex === 0}
          >
            <ChevronLeft className="h-4 w-4" />
          </Button>
          <Button
            variant="outline"
            size="icon"
            className="rounded-full"
            onClick={goToNext}
            aria-label="Suivant"
            disabled={!carouselOptions.infinite && currentIndex >= totalSlides - slidesToShow}
          >
            <ChevronRight className="h-4 w-4" />
          </Button>
        </div>
      )}
      
      {/* Pagination */}
      {pagination && totalSlides > 1 && (
        <div className="flex justify-center mt-4 gap-1.5">
          {Array.from({ length: totalSlides - slidesToShow + 1 }).map((_, index) => (
            <button
              key={index}
              className={cn(
                "w-2 h-2 rounded-full transition-colors",
                index === currentIndex ? "bg-primary" : "bg-muted"
              )}
              onClick={() => goToSlide(index)}
              aria-label={`Aller à la diapositive ${index + 1}`}
              aria-current={index === currentIndex ? "true" : "false"}
            />
          ))}
        </div>
      )}
    </div>
  )
}
```

## 4. Animations et transitions

Video-IA utilise plusieurs animations pour enrichir l'expérience utilisateur sans compromettre les performances.

### Composant de transition de page

```jsx
'use client'

import { motion, AnimatePresence } from 'framer-motion'
import { usePathname } from 'next/navigation'

export default function PageTransition({ children }) {
  const pathname = usePathname()
  
  return (
    <AnimatePresence mode="wait">
      <motion.div
        key={pathname}
        initial={{ opacity: 0, y: 10 }}
        animate={{ opacity: 1, y: 0 }}
        exit={{ opacity: 0, y: 10 }}
        transition={{ duration: 0.3, ease: [0.22, 1, 0.36, 1] }}
      >
        {children}
      </motion.div>
    </AnimatePresence>
  )
}
```

### Composant d'intersection observer pour les animations au défilement

```jsx
'use client'

import { useRef, useEffect, useState } from 'react'
import { motion } from 'framer-motion'
import { cn } from '@/lib/utils'

const fadeInVariants = {
  hidden: { opacity: 0, y: 20 },
  visible: { opacity: 1, y: 0 }
}

export function FadeIn({
  children,
  className,
  threshold = 0.1,
  delay = 0,
  duration = 0.5,
  once = true,
  ...props
}) {
  const ref = useRef(null)
  const [isInView, setIsInView] = useState(false)
  
  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsInView(true)
          if (once && ref.current) {
            observer.unobserve(ref.current)
          }
        } else if (!once) {
          setIsInView(false)
        }
      },
      { threshold }
    )
    
    const currentRef = ref.current
    if (currentRef) {
      observer.observe(currentRef)
    }
    
    return () => {
      if (currentRef) {
        observer.unobserve(currentRef)
      }
    }
  }, [threshold, once])
  
  return (
    <motion.div
      ref={ref}
      className={cn(className)}
      initial="hidden"
      animate={isInView ? "visible" : "hidden"}
      variants={fadeInVariants}
      transition={{ duration, delay, ease: "easeOut" }}
      {...props}
    >
      {children}
    </motion.div>
  )
}

export function StaggeredChildren({
  children,
  className,
  threshold = 0.1,
  staggerDelay = 0.1,
  initialDelay = 0,
  duration = 0.5,
  ...props
}) {
  const ref = useRef(null)
  const [isInView, setIsInView] = useState(false)
  
  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsInView(true)
          observer.unobserve(ref.current)
        }
      },
      { threshold }
    )
    
    if (ref.current) {
      observer.observe(ref.current)
    }
    
    return () => {
      if (ref.current) {
        observer.unobserve(ref.current)
      }
    }
  }, [threshold])
  
  const containerVariants = {
    hidden: {},
    visible: {
      transition: {
        staggerChildren: staggerDelay,
        delayChildren: initialDelay
      }
    }
  }
  
  const childVariants = {
    hidden: { opacity: 0, y: 20 },
    visible: { 
      opacity: 1, 
      y: 0,
      transition: { duration }
    }
  }
  
  return (
    <motion.div
      ref={ref}
      className={className}
      variants={containerVariants}
      initial="hidden"
      animate={isInView ? "visible" : "hidden"}
      {...props}
    >
      {Array.isArray(children) 
        ? children.map((child, index) => (
            <motion.div key={index} variants={childVariants}>
              {child}
            </motion.div>
          ))
        : <motion.div variants={childVariants}>{children}</motion.div>
      }
    </motion.div>
  )
}
```

## 5. Gestion des thèmes (clair/sombre)

Video-IA prend en charge les thèmes clair et sombre avec une détection automatique des préférences système.

### Système de thème (app/theme-provider.jsx)

```jsx
'use client'

import { createContext, useContext, useEffect, useState } from 'react'

export const ThemeProviderContext = createContext({
  theme: 'system',
  setTheme: () => null,
})

export function ThemeProvider({
  children,
  defaultTheme = 'system',
  storageKey = 'video-ia-theme',
  ...props
}) {
  const [theme, setTheme] = useState(defaultTheme)

  useEffect(() => {
    const savedTheme = localStorage.getItem(storageKey)
    
    if (savedTheme) {
      setTheme(savedTheme)
    } else {
      // Détection des préférences système
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches
      setTheme(prefersDark ? 'dark' : 'light')
    }
  }, [storageKey])

  useEffect(() => {
    const root = window.document.documentElement

    // Supprimer les classes existantes
    root.classList.remove('light', 'dark')

    // Appliquer le thème
    if (theme === 'system') {
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches
      root.classList.add(prefersDark ? 'dark' : 'light')
    } else {
      root.classList.add(theme)
    }
  }, [theme])

  const value = {
    theme,
    setTheme: (newTheme) => {
      localStorage.setItem(storageKey, newTheme)
      setTheme(newTheme)
    },
  }

  return (
    <ThemeProviderContext.Provider value={value} {...props}>
      {children}
    </ThemeProviderContext.Provider>
  )
}

// Hook pour utiliser le thème
export const useTheme = () => {
  const context = useContext(ThemeProviderContext)
  if (!context) {
    throw new Error('useTheme doit être utilisé dans un ThemeProvider')
  }
  return context
}
```

### Sélecteur de thème (components/theme-selector.jsx)

```jsx
'use client'

import { Moon, Sun, Laptop } from 'lucide-react'
import { Button } from '@/components/ui/button'
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu'
import { useTheme } from '@/app/theme-provider'

export function ThemeSelector() {
  const { theme, setTheme } = useTheme()

  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <Button variant="ghost" size="icon" className="h-9 w-9 rounded-full">
          {theme === 'dark' ? (
            <Moon className="h-4 w-4" />
          ) : theme === 'light' ? (
            <Sun className="h-4 w-4" />
          ) : (
            <Laptop className="h-4 w-4" />
          )}
          <span className="sr-only">Changer le thème</span>
        </Button>
      </DropdownMenuTrigger>
      <DropdownMenuContent align="end">
        <DropdownMenuItem onClick={() => setTheme('light')}>
          <Sun className="mr-2 h-4 w-4" />
          <span>Clair</span>
        </DropdownMenuItem>
        <DropdownMenuItem onClick={() => setTheme('dark')}>
          <Moon className="mr-2 h-4 w-4" />
          <span>Sombre</span>
        </DropdownMenuItem>
        <DropdownMenuItem onClick={() => setTheme('system')}>
          <Laptop className="mr-2 h-4 w-4" />
          <span>Système</span>
        </DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  )
}
```

## 6. Accessibilité

Video-IA accorde une grande importance à l'accessibilité en suivant les normes WCAG 2.1 niveau AA.

### Composant sr-only (components/ui/sr-only.jsx)

```jsx
import { cn } from '@/lib/utils'

export function SrOnly({ children, className, ...props }) {
  return (
    <span
      className={cn(
        'absolute -m-px h-px w-px overflow-hidden whitespace-nowrap border-0 p-0',
        className
      )}
      {...props}
    >
      {children}
    </span>
  )
}
```

### Composant skip-link (components/skip-link.jsx)

```jsx
import { cn } from '@/lib/utils'

export default function SkipLink({ className, ...props }) {
  return (
    <a
      href="#main-content"
      className={cn(
        "absolute top-0 left-0 z-50 bg-primary text-primary-foreground px-4 py-2 transform -translate-y-full focus:translate-y-0 transition",
        className
      )}
      {...props}
    >
      Aller au contenu principal
    </a>
  )
}
```

## 7. Gestion des médias et optimisation d'images

Video-IA utilise Next.js Image avec Sharp pour l'optimisation automatique des images, et implémente une logique de chargement paresseux.

### ImageWithFallback (components/ui/image.jsx)

```jsx
'use client'

import { useState } from 'react'
import NextImage from 'next/image'
import { cn } from '@/lib/utils'

export function ImageWithFallback({
  src,
  alt,
  fallbackSrc = '/images/placeholder.svg',
  className,
  onError,
  ...props
}) {
  const [imgSrc, setImgSrc] = useState(src)
  const [hasError, setHasError] = useState(false)

  const handleError = (error) => {
    setHasError(true)
    setImgSrc(fallbackSrc)
    if (onError) {
      onError(error)
    }
  }

  return (
    <NextImage
      src={imgSrc}
      alt={alt}
      className={cn(
        'transition-opacity duration-300',
        hasError && 'grayscale opacity-50',
        className
      )}
      onError={handleError}
      {...props}
    />
  )
}

export function BlurImage({
  src,
  alt,
  width,
  height,
  blurDataURL,
  className,
  ...props
}) {
  return (
    <div className={cn('overflow-hidden rounded-md', className)}>
      <NextImage
        src={src}
        alt={alt}
        width={width}
        height={height}
        placeholder={blurDataURL ? 'blur' : 'empty'}
        blurDataURL={blurDataURL}
        className="w-full h-full object-cover transition-transform duration-500 hover:scale-105"
        {...props}
      />
    </div>
  )
}
```

### ImageUploader (components/modules/ImageUploader.jsx)

```jsx
'use client'

import { useState, useRef, useCallback } from 'react'
import { useDropzone } from 'react-dropzone'
import { Trash2, Camera, Loader2 } from 'lucide-react'
import { Button } from '@/components/ui/button'
import { cn } from '@/lib/utils'

export default function ImageUploader({
  initialImage = null,
  onImageSelected,
  maxSize = 5 * 1024 * 1024, // 5MB
  acceptedTypes = {
    'image/jpeg': ['.jpg', '.jpeg'],
    'image/png': ['.png'],
    'image/webp': ['.webp']
  },
  aspectRatio = 1, // 1:1 par défaut
  className,
  ...props
}) {
  const [preview, setPreview] = useState(initialImage)
  const [isLoading, setIsLoading] = useState(false)
  const [error, setError] = useState(null)
  const inputRef = useRef(null)
  
  // Configuration de react-dropzone
  const onDrop = useCallback((acceptedFiles) => {
    setError(null)
    
    if (acceptedFiles.length === 0) {
      return
    }
    
    const file = acceptedFiles[0]
    
    if (file.size > maxSize) {
      setError(`L'image est trop volumineuse. Maximum: ${maxSize / (1024 * 1024)}MB`)
      return
    }
    
    setIsLoading(true)
    
    // Création d'une URL pour la prévisualisation
    const objectUrl = URL.createObjectURL(file)
    setPreview(objectUrl)
    
    // Notification au parent
    if (onImageSelected) {
      onImageSelected(file)
    }
    
    setIsLoading(false)
    
    // Nettoyage de l'URL quand plus nécessaire
    return () => URL.revokeObjectURL(objectUrl)
  }, [maxSize, onImageSelected])
  
  const { getRootProps, getInputProps, isDragActive } = useDropzone({
    onDrop,
    accept: acceptedTypes,
    maxSize,
    multiple: false
  })
  
  // Suppression de l'image
  const handleRemove = (e) => {
    e.stopPropagation()
    setPreview(null)
    setError(null)
    if (onImageSelected) {
      onImageSelected(null)
    }
  }
  
  // Calcul du format d'affichage selon le ratio
  const paddingTop = `${(1 / aspectRatio) * 100}%`
  
  return (
    <div 
      className={cn(
        "relative rounded-lg border-2 border-dashed transition-all",
        isDragActive ? "border-primary bg-primary/5" : "border-muted-foreground/25",
        className
      )}
      {...props}
    >
      <div
        {...getRootProps()}
        className="relative overflow-hidden cursor-pointer focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"
        style={{ paddingTop }}
      >
        <input {...getInputProps()} ref={inputRef} />
        
        {isLoading ? (
          <div className="absolute inset-0 flex items-center justify-center">
            <Loader2 className="h-8 w-8 animate-spin text-muted-foreground" />
          </div>
        ) : preview ? (
          // Affichage de l'image sélectionnée
          <>
            <img
              src={preview}
              alt="Aperçu de l'image"
              className="absolute inset-0 w-full h-full object-cover"
            />
            <div className="absolute inset-0 bg-black/30 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center">
              <Button
                variant="destructive"
                size="sm"
                className="mx-2"
                onClick={handleRemove}
              >
                <Trash2 className="mr-2 h-4 w-4" />
                Supprimer
              </Button>
            </div>
          </>
        ) : (
          // Zone de dépôt vide
          <div className="absolute inset-0 flex flex-col items-center justify-center text-center p-4">
            <Camera className="h-10 w-10 mb-2 text-muted-foreground" />
            <p className="text-sm font-medium">
              {isDragActive ? (
                "Déposez l'image ici..."
              ) : (
                <>
                  Glissez une image ou <span className="text-primary">parcourez</span>
                </>
              )}
            </p>
            <p className="text-xs text-muted-foreground mt-1">
              JPG, PNG ou WebP (max. {maxSize / (1024 * 1024)}MB)
            </p>
          </div>
        )}
      </div>
      
      {/* Message d'erreur */}
      {error && (
        <div className="mt-2 text-sm text-destructive">
          {error}
        </div>
      )}
    </div>
  )
}
```

## 8. Responsivité et adaptation mobile

Video-IA adopte une approche mobile-first rigoureuse avec des optimisations spécifiques pour chaque taille d'écran.

### Section de services adaptative

```jsx
'use client'

import { useState } from 'react'
import { ChevronDown } from 'lucide-react'
import {
  Accordion,
  AccordionContent,
  AccordionItem,
  AccordionTrigger,
} from '@/components/ui/accordion'
import { FadeIn } from '@/components/animations'
import { cn } from '@/lib/utils'
import { useMediaQuery } from '@/lib/hooks/useMediaQuery'

// Liste des fonctionnalités à présenter
const features = [
  {
    title: "Découvrez des outils d'IA innovants",
    description: "Explorez un catalogue complet d'outils d'intelligence artificielle spécialisés dans la création, l'édition et l'optimisation vidéo.",
    icon: '🔍'
  },
  {
    title: "Comparez les fonctionnalités et tarifs",
    description: "Consultez côte à côte les caractéristiques, les prix et les avis pour choisir l'outil qui correspond parfaitement à vos besoins.",
    icon: '⚖️'
  },
  {
    title: "Suivez les dernières tendances",
    description: "Restez informé des nouveautés et innovations dans le domaine de l'IA appliquée à la vidéo grâce à nos mises à jour régulières.",
    icon: '📈'
  },
  {
    title: "Optimisez votre flux de travail",
    description: "Découvrez comment intégrer ces outils à votre processus créatif pour gagner du temps et améliorer la qualité de vos productions.",
    icon: '⚡'
  }
]

export default function ResponsiveFeatures() {
  const [activeTab, setActiveTab] = useState(0)
  const isMobile = useMediaQuery('(max-width: 768px)')
  
  // Version mobile (accordéon)
  if (isMobile) {
    return (
      <div className="px-4 py-12">
        <h2 className="text-2xl font-bold text-center mb-8">Comment Video-IA vous aide</h2>
        
        <Accordion type="single" collapsible className="w-full max-w-xl mx-auto">
          {features.map((feature, index) => (
            <AccordionItem key={index} value={`item-${index}`}>
              <AccordionTrigger className="text-left py-4">
                <div className="flex items-center">
                  <span className="text-2xl mr-3">{feature.icon}</span>
                  <span className="font-medium">{feature.title}</span>
                </div>
              </AccordionTrigger>
              <AccordionContent className="pl-12 pb-4">
                {feature.description}
              </AccordionContent>
            </AccordionItem>
          ))}
        </Accordion>
      </div>
    )
  }
  
  // Version desktop (tabs)
  return (
    <div className="px-4 py-16">
      <h2 className="text-3xl font-bold text-center mb-16">Comment Video-IA vous aide</h2>
      
      <div className="flex flex-col md:flex-row gap-12 max-w-6xl mx-auto">
        {/* Tabs navigation */}
        <div className="md:w-1/3 space-y-2">
          {features.map((feature, index) => (
            <button
              key={index}
              onClick={() => setActiveTab(index)}
              className={cn(
                "w-full text-left p-4 rounded-lg transition-colors",
                activeTab === index 
                  ? "bg-primary/10 text-primary border-l-4 border-primary" 
                  : "hover:bg-muted"
              )}
            >
              <div className="flex items-center">
                <span className="text-2xl mr-3">{feature.icon}</span>
                <span className="font-medium">{feature.title}</span>
              </div>
            </button>
          ))}
        </div>
        
        {/* Tab content */}
        <div className="md:w-2/3 bg-card rounded-lg p-8 shadow-md">
          <FadeIn>
            <h3 className="text-2xl font-bold mb-4 flex items-center">
              <span className="text-3xl mr-4">{features[activeTab].icon}</span>
              {features[activeTab].title}
            </h3>
            <p className="text-lg text-muted-foreground">
              {features[activeTab].description}
            </p>
            <div className="mt-6">
              <img 
                src={`/images/feature-${activeTab + 1}.jpg`} 
                alt={features[activeTab].title}
                className="rounded-lg w-full h-auto shadow-md"
              />
            </div>
          </FadeIn>
        </div>
      </div>
    </div>
  )
}
```

Le système UI de Video-IA combine les meilleures pratiques de design moderne, avec une attention particulière à l'accessibilité, la performance et l'esthétique. La personnalisation de Shadcn UI couplée à Tailwind CSS permet une grande flexibilité tout en maintenant une cohérence visuelle parfaite à travers l'application.